"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils"),_dom=require("../../tools/dom");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=(0,_vue.defineComponent)({name:"VxeTableFilter",props:{filterStore:Object},setup:function(a){function i(e,t,l){a.filterStore.options.forEach(function(e){e._checked=!1}),l._checked=t,o.checkFilterOptions(),f(e)}function n(e,t,l){l._checked=t,o.checkFilterOptions()}var o=(0,_vue.inject)("$xetable",{}),c=o.reactData,u=o.internalData,s=(0,_vue.computed)(function(){var e=a.filterStore;return e&&e.options.some(function(e){return e.checked})}),f=function(e){a.filterStore.options.forEach(function(e){e.checked=e._checked}),o.confirmFilterEvent(e)},d=function(e){var t=a.filterStore;o.handleClearFilter(t.column),o.confirmFilterEvent(e)},_=function(e,t,l){a.filterStore.multiple?n(0,t,l):i(e,t,l)},v=function(e,t){var l;a.filterStore.multiple?(l=t,(t=a.filterStore).options.forEach(function(e){e._checked=l,e.checked=l}),t.isAllSelected=l,t.isIndeterminate=!1):d(e)},p={changeRadioOption:i,changeMultipleOption:n,changeAllOption:v,changeOption:_,confirmFilter:f,resetFilter:d};return function(){var e=a.filterStore,t=c.initStore,l=e.column,i=l?l.filterRender:null,n=i?_vXETable.VXETable.renderer.get(i.name):null,r=n?n.filterClassName:"",l=Object.assign({},u._currFilterParams,{$panel:p,$table:o});return(0,_vue.h)("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",(0,_dom.getPropClass)(r,l),{"is--animat":o.props.animat,"is--multiple":e.multiple,"is--active":e.visible}],style:e.style},t.filter&&e.visible?function(e,t){var l=a.filterStore,i=l.column,n=l.multiple,r=l.maxHeight,c=i.slots,i=c?c.filter:null,c=Object.assign({},u._currFilterParams,{$panel:p,$table:o});if(i)return[(0,_vue.h)("div",{class:"vxe-table--filter-template"},o.callSlot(i,c))];if(t&&t.renderFilter)return[(0,_vue.h)("div",{class:"vxe-table--filter-template"},t.renderFilter(e,c))];e=n?l.isAllSelected:!l.options.some(function(e){return e._checked}),c=n&&l.isIndeterminate;return[(0,_vue.h)("ul",{class:"vxe-table--filter-header"},[(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":e,"is--indeterminate":c}],title:_conf.default.i18n(n?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:function(e){v(e,!l.isAllSelected)}},(n?[(0,_vue.h)("span",{class:["vxe-checkbox--icon",c?_conf.default.icon.TABLE_CHECKBOX_INDETERMINATE:e?_conf.default.icon.TABLE_CHECKBOX_CHECKED:_conf.default.icon.TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},_conf.default.i18n("vxe.table.allFilter"))]))]),(0,_vue.h)("ul",{class:"vxe-table--filter-body",style:r?{maxHeight:"".concat(r,"px")}:{}},l.options.map(function(t){var e=t._checked;return(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":t._checked}],title:t.label,onClick:function(e){_(e,!t._checked,t)}},(n?[(0,_vue.h)("span",{class:["vxe-checkbox--icon",e?_conf.default.icon.TABLE_CHECKBOX_CHECKED:_conf.default.icon.TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},(0,_utils.formatText)(t.label,1))]))}))]}(i,n).concat((t=a.filterStore,e=t.column,i=t.multiple,n=s.value,e=(e=e.filterRender)?_vXETable.VXETable.renderer.get(e.name):null,t=!n&&!t.isAllSelected&&!t.isIndeterminate,!i||e&&!1===e.showFilterFooter?[]:[(0,_vue.h)("div",{class:"vxe-table--filter-footer"},[(0,_vue.h)("button",{class:{"is--disabled":t},disabled:t,onClick:f},_conf.default.i18n("vxe.table.confirmFilter")),(0,_vue.h)("button",{onClick:d},_conf.default.i18n("vxe.table.resetFilter"))])])):[])}}});exports.default=_default;