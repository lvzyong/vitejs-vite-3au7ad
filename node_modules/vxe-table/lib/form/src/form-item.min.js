"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formItemProps=exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils"),_vn=require("../../tools/vn"),_util=require("./util"),_render=require("./render");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,i=1,l=arguments.length;i<l;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},formItemProps={title:String,field:String,span:[String,Number],align:String,titleAlign:String,titleWidth:[String,Number],titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},className:[String,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visibleMethod:Function,visible:{type:Boolean,default:null},folding:Boolean,collapseNode:Boolean,itemRender:Object};exports.formItemProps=formItemProps;var _default=(0,_vue.defineComponent)({name:"VxeFormItem",props:formItemProps,setup:function(e,t){var i=t.slots,M=(0,_vue.ref)(),l=(0,_vue.inject)("$xeform",{}),r=(0,_vue.inject)("$xeformgather",null),n=(0,_vue.reactive)((0,_util.createItem)(l,e)),o={formItem:n},t={itemConfig:n};n.slots=i,(0,_vue.provide)("$xeformiteminfo",t),(0,_vue.provide)("$xeformitem",o),(0,_vue.provide)("$xeformgather",null),(0,_util.watchItem)(e,n),(0,_vue.onMounted)(function(){(0,_util.assemItem)(l,M.value,n,r)}),(0,_vue.onUnmounted)(function(){(0,_util.destroyItem)(l,n)});return{renderVN:function(){var e=l?l.props:null;return e&&e.customLayout?function(t,e){var i=t.props,l=t.reactData,r=i.data,n=i.rules,o=i.titleOverflow,u=l.collapseAll,s=t.getComputeMaps().computeValidOpts.value,a=e.slots,f=e.title,d=e.visible,v=e.folding,c=e.field,m=e.collapseNode,_=e.itemRender,p=e.showError,g=e.errRule,x=e.className,h=e.titleOverflow,b=(0,_utils.isEnableConf)(_)?_vXETable.VXETable.renderer.get(_.name):null,N=b?b.itemClassName:"",I=a?a.default:null,O=a?a.title:null,q=e.span||i.span,y=e.align||i.align,C=e.titleAlign||i.titleAlign,l=e.titleWidth||i.titleWidth,a=_xeUtils.default.isUndefined(h)||_xeUtils.default.isNull(h)?o:h,i="title"===a,o=!0===a||"tooltip"===a,h=i||o||"ellipsis"===a,S={data:r,field:c,property:c,item:e,$form:t},a=!1;if(!1===d)return(0,_vue.createCommentVNode)();!n||(F=n[c])&&(a=F.some(function(e){return e.required}));var F=[];I?F=t.callSlot(I,S):b&&b.renderItemContent?F=(0,_vn.getSlotVNs)(b.renderItemContent(_,S)):c&&(F=["".concat(_xeUtils.default.get(r,c))]),m&&F.push((0,_vue.h)("div",{class:"vxe-form--item-trigger-node",onClick:t.toggleCollapseEvent},[(0,_vue.h)("span",{class:"vxe-form--item-trigger-text"},u?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),(0,_vue.h)("i",{class:["vxe-form--item-trigger-icon",u?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})])),g&&s.showMessage&&F.push((0,_vue.h)("div",{class:"vxe-form--item-valid",style:g.maxWidth?{width:"".concat(g.maxWidth,"px")}:null},g.message));o=o?{onMouseenter:function(e){t.triggerTitleTipEvent(e,S)},onMouseleave:t.handleTitleTipLeaveEvent}:{};return(0,_vue.h)("div",{ref:M,class:["vxe-form--item",e.id,q?"vxe-col--".concat(q," is--span"):"",x?_xeUtils.default.isFunction(x)?x(S):x:"",N?_xeUtils.default.isFunction(N)?N(S):N:"",{"is--title":f,"is--required":a,"is--hidden":v&&u,"is--active":(0,_util.isActivetem)(t,e),"is--error":p}]},[(0,_vue.h)("div",{class:"vxe-form--item-inner"},[f||O?(0,_vue.h)("div",__assign({class:["vxe-form--item-title",C?"align--".concat(C):null,{"is--ellipsis":h}],style:l?{width:isNaN(l)?l:"".concat(l,"px")}:null,title:i?(0,_utils.getFuncText)(f):null},o),(0,_render.renderTitle)(t,e)):null,(0,_vue.h)("div",{class:["vxe-form--item-content",y?"align--".concat(y):null]},F)])])}(l,n):(0,_vue.h)("div",{ref:M})}}},render:function(){return this.renderVN()}});exports.default=_default;