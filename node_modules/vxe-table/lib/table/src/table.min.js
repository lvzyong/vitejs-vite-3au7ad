"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_dom=require("../../tools/dom"),_utils=require("../../tools/utils"),_log=require("../../tools/log"),_resize=require("../../tools/resize"),_event=require("../../tools/event"),_size=require("../../hooks/size"),_vXETable=require("../../v-x-e-table"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_cell=_interopRequireDefault(require("./cell")),_body=_interopRequireDefault(require("./body")),_header=_interopRequireDefault(require("../../header")),_footer=_interopRequireDefault(require("../../footer")),_props=_interopRequireDefault(require("./props")),_emits=_interopRequireDefault(require("./emits")),_index=_interopRequireDefault(require("../../loading/index")),_util=require("./util"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,l=0,o=t.length;l<o;l++)!r&&l in t||((r=r||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(r||Array.prototype.slice.call(t))},isWebkit=_dom.browse["-webkit"]&&!_dom.browse.edge,resizableStorageKey="VXE_TABLE_CUSTOM_COLUMN_WIDTH",visibleStorageKey="VXE_TABLE_CUSTOM_COLUMN_VISIBLE",_default=(0,_vue.defineComponent)({name:"VxeTable",props:_props.default,emits:_emits.default,setup:function($,e){function v(e,t,n){return e=_xeUtils.default.get(e,n),n=_xeUtils.default.get(t,n),!(!(0,_utils.eqEmptyValue)(e)||!(0,_utils.eqEmptyValue)(n))||(_xeUtils.default.isString(e)||_xeUtils.default.isNumber(e)?""+e==""+n:_xeUtils.default.isEqual(e,n))}function c(e){var t=Ue.value.orders,e=e.order||null,e=t.indexOf(e)+1;return t[e<t.length?e:0]}function t(e,a,i){var t,u;e&&(t=$.treeConfig,u=B.visibleColumn,_xeUtils.default.isArray(e)||(e=[e]),t&&e.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),e.forEach(function(e){var t,n=e.row,r=e.col,l=e.rowspan,o=e.colspan;i&&_xeUtils.default.isNumber(n)&&(n=i[n]),_xeUtils.default.isNumber(r)&&(r=u[r]),(i?n:_xeUtils.default.isNumber(n))&&r&&(l||o)&&(l=_xeUtils.default.toNumber(l)||1,o=_xeUtils.default.toNumber(o)||1,(1<l||1<o)&&(t=_xeUtils.default.findIndexOf(a,function(e){return!(e._row!==n&&(0,_util.getRowid)(lt,e._row)!==(0,_util.getRowid)(lt,n)||e._col.id!==r&&e._col.id!==r.id)}),(e=a[t])?(e.rowspan=l,e.colspan=o,e._rowspan=l,e._colspan=o):(t=i?lt.findRowIndexOf(i,n):n,e=G.getVTColumnIndex(r),a.push({row:t,col:e,rowspan:l,colspan:o,_row:n,_col:r,_rowspan:l,_colspan:o}))))}))}function n(e,r,l){var t,o,a=[];return e&&(t=$.treeConfig,o=B.visibleColumn,_xeUtils.default.isArray(e)||(e=[e]),t&&e.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),e.forEach(function(e){var t=e.row,n=e.col;l&&_xeUtils.default.isNumber(t)&&(t=l[t]),_xeUtils.default.isNumber(n)&&(n=o[n]);e=_xeUtils.default.findIndexOf(r,function(e){return!(e._row!==t&&(0,_util.getRowid)(lt,e._row)!==(0,_util.getRowid)(lt,t)||e._col.id!==n&&e._col.id!==n.id)});-1<e&&(e=r.splice(e,1),a.push(e[0]))})),a}function a(){B.tableFullColumn.forEach(function(e){e.order=null})}function u(){function a(e,t,n,r,l){var o=e.id,a=e.field,i=e.fixed,u=e.type,c=e.treeNode,l={column:e,colid:o,index:t,items:n,parent:l};a&&("development"===process.env.NODE_ENV&&x[a]&&(0,_log.warnLog)("vxe.error.colRepet",["field",a]),x[a]=l),!g&&i&&(g=i),c?("development"===process.env.NODE_ENV&&s&&(0,_log.warnLog)("vxe.error.colRepet",["tree-node",c]),s=s||e):"expand"===u&&("development"===process.env.NODE_ENV&&d&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),d=d||e),"development"===process.env.NODE_ENV&&("checkbox"===u?(f&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),f=f||e):"radio"===u&&(v&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),v=v||e)),m&&!1===e.showOverflow&&(m=!1),h[o]&&(0,_log.errLog)("vxe.error.colRepet",["colId",o]),h[o]=l}var d,s,f,v,g,e=B.tableFullColumn,t=B.collectColumn,h=B.fullColumnIdData={},x=B.fullColumnFieldData={},n=Me.value,r=t.some(_utils.hasChildrenList),m=!!$.showOverflow;r?_xeUtils.default.eachTree(t,function(e,t,n,r,l,o){e.level=o.length,a(e,t,n,0,l)}):e.forEach(a),"development"===process.env.NODE_ENV&&d&&n.area&&(0,_log.errLog)("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),Y.isGroup=r,Y.treeNodeColumn=s,Y.expandColumn=d,Y.isAllOverflow=m}function _(){B.customHeight=st("height"),B.customMaxHeight=st("maxHeight")}function r(){var e=le.value,t=oe.value,n=ae.value,r=t?t.$el:null,l=e?e.$el:null,o=n?n.$el:null;if(r){var a=0,i=r.clientWidth-1,u=i,c=u/100,d=$.fit,s=Y.columnStore,f=s.resizeList,v=s.pxMinList,t=s.pxList,e=s.scaleList,n=s.scaleMinList,s=s.autoList;if(v.forEach(function(e){var t=parseInt(e.minWidth);a+=t,e.renderWidth=t}),n.forEach(function(e){var t=Math.floor(parseInt(e.minWidth)*c);a+=t,e.renderWidth=t}),e.forEach(function(e){var t=Math.floor(parseInt(e.width)*c);a+=t,e.renderWidth=t}),t.forEach(function(e){var t=parseInt(e.width);a+=t,e.renderWidth=t}),f.forEach(function(e){var t=parseInt(e.resizeWidth);a+=t,e.renderWidth=t}),c=0<(u-=a)?Math.floor(u/(n.length+v.length+s.length)):0,d?0<u&&n.concat(v).forEach(function(e){a+=c,e.renderWidth+=c}):c=40,s.forEach(function(e){var t=Math.max(c,40);e.renderWidth=t,a+=t}),d){var g=e.concat(n).concat(v).concat(s),h=g.length-1;if(0<h){var x=i-a;if(0<x){for(;0<x&&0<=h;)x--,g[h--].renderWidth++;a=i}}}e=r.offsetHeight,n=r.scrollHeight>r.clientHeight,v=0;n&&(v=Math.max(r.offsetWidth-r.clientWidth,0)),Y.scrollbarWidth=v,Y.overflowY=n,B.tableWidth=a,B.tableHeight=e;s=0;l&&(s=l.clientHeight,(0,_vue.nextTick)(function(){l&&r&&l.scrollLeft!==r.scrollLeft&&(l.scrollLeft=r.scrollLeft)})),B.headerHeight=s;v=!1,n=0,s=0;o?(n=o.offsetHeight,(v=a>o.clientWidth)&&(s=Math.max(n-o.clientHeight,0))):(v=i<a)&&(s=Math.max(e-r.clientHeight,0)),B.footerHeight=n,Y.overflowX=v,Y.scrollbarHeight=s,_(),Y.parentHeight=Math.max(B.headerHeight+n+20,Z.getParentHeight()),v&&Z.checkScrolling()}}function b(t){var n=t.sortBy,r=t.sortType;return function(e){e=n?_xeUtils.default.isFunction(n)?n({row:e,column:t}):_xeUtils.default.get(e,n):Z.getCellLabel(e,t);return r&&"auto"!==r?"number"===r?_xeUtils.default.toNumber(e):"string"===r?_xeUtils.default.toValueString(e):e:isNaN(e)?e:_xeUtils.default.toNumber(e)}}function C(){var e=$.treeConfig,t=B.afterFullData,a=B.fullDataRowIdData,i=B.fullAllDataRowIdData,n=B.afterTreeFullData,r=Be.value;e?_xeUtils.default.eachTree(n,function(e,t,n,r){var l=(0,_util.getRowid)(lt,e),o=i[l],r=r.map(function(e,t){return t%2==0?Number(e)+1:"."}).join("");o?(o.seq=r,o._index=t):(i[l]=t={row:e,rowid:l,seq:r,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[l]=t)},{children:r.transform?r.mapChildren:r.children}):t.forEach(function(e,t){var n=(0,_util.getRowid)(lt,e),r=i[n],l=t+1;r?(r.seq=l,r._index=t):(i[n]=t={row:e,rowid:n,seq:l,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[n]=t)})}function E(){var e=$.treeConfig,o=Y.treeExpandeds,t=Be.value;if(e&&t.transform){var a=[],i=new Map;return _xeUtils.default.eachTree(B.afterTreeFullData,function(e,t,n,r,l){(!l||i.has(l)&&-1<lt.findRowIndexOf(o,l))&&(i.set(e,1),a.push(e))},{children:t.mapChildren}),B.afterFullData=a,y(a),a}return B.afterFullData}function i(e){return lt.triggerValidate?lt.triggerValidate(e):(0,_vue.nextTick)()}function R(e,t){i("blur").catch(function(e){return e}).then(function(){lt.handleActived(t,e).then(function(){return i("change")}).catch(function(e){return e})})}function x(e,t){var n,r=B.checkboxReserveRowMap;Se.value.reserve&&(n=(0,_util.getRowid)(lt,e),t?r[n]=e:r[n]&&delete r[n])}function h(r){var l=B.fullAllDataRowIdData;return new Promise(function(e){var t,n=Ye.value.loadMethod;n?(t=l[(0,_util.getRowid)(lt,r)],Y.expandLazyLoadeds.push(r),n({$table:lt,row:r,rowIndex:G.getRowIndex(r),$rowIndex:G.getVMRowIndex(r)}).then(function(){t.expandLoaded=!0,Y.rowExpandeds.push(r)}).catch(function(){t.expandLoaded=!1}).finally(function(){_xeUtils.default.remove(Y.expandLazyLoadeds,function(e){return lt.eqRow(e,r)}),e((0,_vue.nextTick)().then(function(){return G.recalculate()}))})):e()})}function m(e,t){var n,r=B.rowExpandedReserveRowMap;Ye.value.reserve&&(n=(0,_util.getRowid)(lt,e),t?r[n]=e:r[n]&&delete r[n])}function d(){return(0,_vue.nextTick)().then(function(){var e=Y.scrollXLoad,t=Y.scrollYLoad,n=B.scrollXStore,r=B.scrollYStore,l=we.value,o=_e.value;e?(e=ut().visibleSize,a=o.oSize?_xeUtils.default.toNumber(o.oSize):_dom.browse.msie?10:_dom.browse.edge?5:0,n.offsetSize=a,n.visibleSize=e,n.endIndex=Math.max(n.startIndex+n.visibleSize+a,n.endIndex),Z.updateScrollXData()):Z.updateScrollXSpace();var a=ct(),n=a.rowHeight,a=a.visibleSize;r.rowHeight=n,t?(l=l.oSize?_xeUtils.default.toNumber(l.oSize):_dom.browse.msie?20:_dom.browse.edge?10:0,r.offsetSize=l,r.visibleSize=a,r.endIndex=Math.max(r.startIndex+a+l,r.endIndex),Z.updateScrollYData()):Z.updateScrollYSpace(),Y.rowHeight=n,(0,_vue.nextTick)(ft)})}function p(e){var t=$.keepSource,n=$.treeConfig,r=Y.editStore,g=Y.scrollYLoad,h=B.scrollYStore,l=B.scrollXStore,x=B.lastScrollLeft,m=B.lastScrollTop,o=Be.value,a=o.transform,i=[],u=e?e.slice(0):[];n&&(a?("development"===process.env.NODE_ENV&&(o.rowField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.rowField"]),o.parentField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.parentField"]),o.children||(0,_log.errLog)("vxe.error.reqProp",["tree-config.children"]),o.mapChildren||(0,_log.errLog)("vxe.error.reqProp",["tree-config.mapChildren"]),o.children===o.mapChildren&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.children","tree-config.mapChildren"]),u.forEach(function(e){e[o.children]&&e[o.children].length&&(0,_log.warnLog)("vxe.error.errConflicts",["tree-config.transform","row.".concat(o.children)])})),u=(i=_xeUtils.default.toArrayTree(u,{key:o.rowField,parentKey:o.parentField,children:o.children,mapChildren:o.mapChildren})).slice(0)):i=u.slice(0)),h.startIndex=0,h.endIndex=1,l.startIndex=0,l.endIndex=1,r.insertList=[],r.removeList=[];var p=y(u);return Y.scrollYLoad=p,B.tableFullData=u,B.tableFullTreeData=i,Z.cacheRowMap(!0),B.tableSynchData=e,t&&(B.tableSourceData=_xeUtils.default.clone(u,!0)),"development"===process.env.NODE_ENV&&p&&($.height||$.maxHeight||(0,_log.errLog)("vxe.error.reqProp",["table.height | table.max-height | table.scroll-y={enabled: false}"]),$.showOverflow||(0,_log.warnLog)("vxe.error.reqProp",["table.show-overflow"]),$.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["table.span-method"])),lt.clearCellAreas&&$.mouseConfig&&(lt.clearCellAreas(),lt.clearCopyCellArea()),G.clearMergeCells(),G.clearMergeFooterItems(),Z.handleTableData(!0),G.updateFooter(),(0,_vue.nextTick)().then(function(){_(),ft()}).then(function(){d()}).then(function(){var e,t,n,r,l,o,a,i,u,c,d,s,f,v;return p&&(h.endIndex=h.visibleSize),e=$.treeConfig,t=Y.expandColumn,n=Y.currentRow,r=Y.selectRow,l=Y.selection,o=Y.rowExpandeds,a=Y.treeExpandeds,i=B.fullDataRowIdData,u=B.fullAllDataRowIdData,c=B.radioReserveRow,d=Ye.value,s=Be.value,f=ye.value,v=Se.value,r&&!u[(0,_util.getRowid)(lt,r)]&&(Y.selectRow=null),f.reserve&&c&&(i[c=(0,_util.getRowid)(lt,c)]&&G.setRadioRow(i[c].row)),Y.selection=at(l),v.reserve&&G.setCheckboxRow(it(B.checkboxReserveRowMap),!0),n&&!u[(0,_util.getRowid)(lt,n)]&&(Y.currentRow=null),Y.rowExpandeds=t?at(o):[],t&&d.reserve&&G.setRowExpand(it(B.rowExpandedReserveRowMap),!0),Y.treeExpandeds=e?at(a):[],e&&s.reserve&&G.setTreeExpand(it(B.treeExpandedReserveRowMap),!0),Z.checkSelectionStatus(),new Promise(function(l){(0,_vue.nextTick)().then(function(){return G.recalculate()}).then(function(){var e=x,t=m,n=_e.value,r=we.value;n.scrollToLeftOnChange&&(e=0),r.scrollToTopOnChange&&(t=0),g===p?(0,_util.restoreScrollLocation)(lt,e,t).then(l):setTimeout(function(){return(0,_util.restoreScrollLocation)(lt,e,t).then(l)})})})})}function w(){var t,n,e,r,l,o,a,i,u,c,d,s,f;$.checkboxConfig&&(t=B.fullDataRowIdData,r=(e=Se.value).checkAll,e=e.checkRowKeys,r?G.setAllCheckboxRow(!0):e&&(n=[],e.forEach(function(e){t[e]&&n.push(t[e].row)}),G.setCheckboxRow(n,!0))),$.radioConfig&&(r=B.fullDataRowIdData,e=(o=ye.value).checkRowKey,o=o.reserve,e&&(r[e]&&G.setRadioRow(r[e].row),o&&(r=(0,_util.getRowkey)(lt),B.radioReserveRow=((o={})[r]=e,o)))),$.expandConfig&&(l=B.fullDataRowIdData,o=(c=Ye.value).expandAll,c=c.expandRowKeys,o?G.setAllRowExpand(!0):c&&(a=[],c.forEach(function(e){l[e]&&a.push(l[e].row)}),G.setRowExpand(a,!0))),$.treeConfig&&(i=B.tableFullData,c=(u=Be.value).expandAll,f=u.expandRowKeys,c?G.setAllTreeExpand(!0):f&&(d=[],s=(0,_util.getRowkey)(lt),f.forEach(function(t){var e=_xeUtils.default.findTree(i,function(e){return t===_xeUtils.default.get(e,s)},u);e&&d.push(e.item)}),G.setTreeExpand(d,!0))),(f=$.mergeCells)&&G.setMergeCells(f),(f=$.mergeFooterItems)&&G.setMergeFooterItems(f),(0,_vue.nextTick)(function(){return setTimeout(function(){return G.recalculate()})})}function T(){var e,t,n;!(n=$.sortConfig)||(t=(e=Ue.value).defaultSort)&&(t=!_xeUtils.default.isArray(t)?[t]:t).length&&((n.multiple?t:t.slice(0,1)).forEach(function(e,t){var n=e.field,e=e.order;n&&e&&((n=G.getColumnByField(n))&&n.sortable&&(n.order=e,n.sortTime=Date.now()+t))}),e.remote||Z.handleTableData(!0).then(ft))}function s(){var e=Y.mergeList,t=Y.mergeFooterList,n=B.scrollXStore,r=n.startIndex,l=n.endIndex,o=n.offsetSize,a=(i=ut()).toVisibleIndex,i=i.visibleSize,o={startIndex:Math.max(0,a-1-o),endIndex:a+i+o};dt(e.concat(t),o,"col"),t=o.startIndex,o=o.endIndex,(a<=r||l-i-1<=a)&&(r===t&&l===o||(n.startIndex=t,n.endIndex=o,Z.updateScrollXData())),G.closeTooltip()}function f(e){var t=[];return e.forEach(function(e){t.push.apply(t,e.children&&e.children.length?f(e.children):[e])}),t}function g(){var t,n,r,a=[],i=[],u=[],e=Y.isGroup,l=Y.columnStore,o=_e.value,c=B.collectColumn,d=B.tableFullColumn,s=B.scrollXStore,f=B.fullColumnIdData;e?(t=[],n=[],r=[],_xeUtils.default.eachTree(c,function(e,t,n,r,l){var o=(0,_utils.hasChildrenList)(e);l&&l.fixed&&(e.fixed=l.fixed),l&&e.fixed!==l.fixed&&(0,_log.errLog)("vxe.error.groupFixed"),o?e.visible=!!_xeUtils.default.findTree(e.children,function(e){return!(0,_utils.hasChildrenList)(e)&&e.visible}):e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)}),c.forEach(function(e){e.visible&&("left"===e.fixed?t:"right"===e.fixed?r:n).push(e)}),Y.tableGroupColumn=t.concat(n).concat(r)):d.forEach(function(e){e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)});var v=a.concat(i).concat(u),d=!!o.enabled&&-1<o.gt&&o.gt<d.length;return Y.hasFixedColumn=0<a.length||0<u.length,Object.assign(l,{leftList:a,centerList:i,rightList:u}),d&&e&&(d=!1,"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.scrollXNotGroup")),d&&("development"===process.env.NODE_ENV&&($.showHeader&&!$.showHeaderOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-header-overflow"]),$.showFooter&&!$.showFooterOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-footer-overflow"]),$.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["span-method"]),$.footerSpanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["footer-span-method"])),e=ut().visibleSize,s.startIndex=0,s.endIndex=e,s.visibleSize=e),v.length===B.visibleColumn.length&&B.visibleColumn.every(function(e,t){return e===v[t]})||(G.clearMergeCells(),G.clearMergeFooterItems()),Y.scrollXLoad=d,v.forEach(function(e,t){e=e.id,e=f[e];e&&(e._index=t)}),B.visibleColumn=v,ht(),G.updateFooter().then(function(){return G.recalculate()}).then(function(){return Z.updateCellAreas(),G.recalculate()})}function l(e){B.collectColumn=e;var n,r,t,l,o,a,i=f(e);return B.tableFullColumn=i,u(),t=$.id,l=$.customConfig,o=B.collectColumn,a=Qe.value.storage,i=!0===a||a&&a.resizable,a=!0===a||a&&a.visible,l&&(i||a)&&(n={},t?(!i||(i=ot(resizableStorageKey)[t])&&_xeUtils.default.each(i,function(e,t){n[t]={field:t,resizeWidth:e}}),!a||(a=ot(visibleStorageKey)[t])&&(a=(t=a.split("|"))[0]?t[0].split(","):[],t=t[1]?t[1].split(","):[],a.forEach(function(e){n[e]?n[e].visible=!1:n[e]={field:e,visible:!1}}),t.forEach(function(e){n[e]?n[e].visible=!0:n[e]={field:e,visible:!0}})),r={},_xeUtils.default.eachTree(o,function(e){var t=e.getKey();t&&(r[t]=e)}),_xeUtils.default.each(n,function(e,t){var n=e.visible,e=e.resizeWidth,t=r[t];t&&(_xeUtils.default.isNumber(e)&&(t.resizeWidth=e),_xeUtils.default.isBoolean(n)&&(t.visible=n))})):(0,_log.errLog)("vxe.error.reqProp",["id"])),g().then(function(){Y.scrollXLoad&&s()}),G.clearMergeCells(),G.clearMergeFooterItems(),Z.handleTableData(!0),"development"===process.env.NODE_ENV&&(Y.scrollXLoad||Y.scrollYLoad)&&Y.expandColumn&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),(0,_vue.nextTick)().then(function(){return q&&q.syncUpdate({collectColumn:e,$table:lt}),G.recalculate()})}function y(e){var t=$.treeConfig,n=we.value,e=(Be.value.transform||!t)&&!!n.enabled&&-1<n.gt&&n.gt<e.length;return Y.scrollYLoad=e}function o(e,t){var n,r=Y.treeExpandeds,l=Y.treeLazyLoadeds,o=Y.treeNodeColumn,a=B.fullAllDataRowIdData,i=B.tableFullData,u=Be.value,c=u.reserve,d=u.lazy,s=u.hasChild,f=u.children,v=u.accordion,g=u.toggleMethod,h=[],x=G.getColumnIndex(o),m=G.getVMColumnIndex(o),p=g?e.filter(function(e){return g({$table:lt,expanded:t,column:o,columnIndex:x,$columnIndex:m,row:e})}):e;return v&&(p=p.length?[p[p.length-1]]:[],(n=_xeUtils.default.findTree(i,function(e){return e===p[0]},u))&&_xeUtils.default.remove(r,function(e){return-1<n.items.indexOf(e)})),t?p.forEach(function(e){var t;-1===lt.findRowIndexOf(r,e)&&(t=a[(0,_util.getRowid)(lt,e)],d&&e[s]&&!t.treeLoaded&&-1===lt.findRowIndexOf(l,e)?h.push(vt(e)):e[f]&&e[f].length&&r.push(e))}):_xeUtils.default.remove(r,function(e){return-1<lt.findRowIndexOf(p,e)}),c&&p.forEach(function(e){return gt(e,t)}),Promise.all(h).then(function(){return G.recalculate()})}function S(e){var t=Y.mergeList,n=B.scrollYStore,r=n.startIndex,l=n.endIndex,o=n.visibleSize,a=n.offsetSize,i=n.rowHeight,e=(e.currentTarget||e.target).scrollTop,i=Math.floor(e/i),a={startIndex:Math.max(0,i-1-a),endIndex:i+o+a};dt(t,a,"row"),t=a.startIndex,a=a.endIndex,(i<=r||l-o-1<=i)&&(r===t&&l===a||(n.startIndex=t,n.endIndex=a,Z.updateScrollYData()))}function I(n){var e=Y.editStore,t=Y.ctxMenuStore,r=Y.filterStore,l=$.mouseConfig,o=J.value,a=Le.value,i=e.actived,u=te.value,c=ne.value,e=re.value;c&&((0,_dom.getEventTargetNode)(n,o,"vxe-cell--filter").flag||(0,_dom.getEventTargetNode)(n,c.$el).flag||(0,_dom.getEventTargetNode)(n,document.body,"vxe-table--ignore-clear").flag||Z.preventEvent(n,"event.clearFilter",r.args,G.closeFilter)),i.row?!1!==a.autoClear&&((r=i.args.cell)&&(0,_dom.getEventTargetNode)(n,r).flag||u&&(0,_dom.getEventTargetNode)(n,u.$el).flag||(!B._lastCallTime||B._lastCallTime+50<Date.now())&&((0,_dom.getEventTargetNode)(n,document.body,"vxe-table--ignore-clear").flag||Z.preventEvent(n,"event.clearActived",i.args,function(){var e,t;(e=(e=(e="row"===a.mode?!!(t=(e=(0,_dom.getEventTargetNode)(n,o,"vxe-body--row")).flag?G.getRowNode(e.targetElem):null)&&!lt.eqRow(t.item,i.args.row):!(0,_dom.getEventTargetNode)(n,o,"col--edit").flag)||(0,_dom.getEventTargetNode)(n,o,"vxe-header--row").flag)||(0,_dom.getEventTargetNode)(n,o,"vxe-footer--row").flag)||!$.height||Y.overflowY||(t=n.target,(0,_dom.hasClass)(t,"vxe-table--body-wrapper")&&(e=n.offsetY<t.clientHeight)),!e&&(0,_dom.getEventTargetNode)(n,o).flag||setTimeout(function(){return lt.clearEdit(n)})}))):l&&((0,_dom.getEventTargetNode)(n,o).flag||me&&(0,_dom.getEventTargetNode)(n,me.getRefMaps().refElem.value).flag||e&&(0,_dom.getEventTargetNode)(n,e.getRefMaps().refElem.value).flag||q&&(0,_dom.getEventTargetNode)(n,q.getRefMaps().refElem.value).flag||(lt.clearSelected(),lt.clearCellAreas&&((0,_dom.getEventTargetNode)(n,document.body,"vxe-table--ignore-areas-clear").flag||Z.preventEvent(n,"event.clearAreas",{},function(){lt.clearCellAreas(),lt.clearCopyCellArea()})))),lt.closeMenu&&t.visible&&e&&!(0,_dom.getEventTargetNode)(n,e.getRefMaps().refElem.value).flag&&lt.closeMenu(),B.isActivated=(0,_dom.getEventTargetNode)(n,me?me.getRefMaps().refElem.value:o).flag}function D(){G.closeFilter(),lt.closeMenu&&lt.closeMenu()}function k(){G.closeTooltip(),lt.closeMenu&&lt.closeMenu()}function A(t){var n=$.mouseConfig,r=$.keyboardConfig,l=Y.filterStore,o=Y.ctxMenuStore,e=Y.editStore,a=Me.value,i=Ae.value,u=e.actived;(0,_event.hasEventKey)(t,_event.EVENT_KEYS.ESCAPE)&&Z.preventEvent(t,"event.keydown",null,function(){var e;G.dispatchEvent("keydown-start",{},t),r&&n&&a.area&&lt.handleKeyboardEvent?lt.handleKeyboardEvent(t):(u.row||l.visible||o.visible)&&(t.stopPropagation(),lt.closeMenu&&lt.closeMenu(),G.closeFilter(),r&&i.isEsc&&u.row&&(e=u.args,lt.clearEdit(t),a.selected&&(0,_vue.nextTick)(function(){return lt.handleSelected(e,t)}))),G.dispatchEvent("keydown",{},t),G.dispatchEvent("keydown-end",{},t)})}function L(H){B.isActivated&&Z.preventEvent(H,"event.keydown",null,function(){var e,t,n,r,l,o=$.mouseConfig,a=$.keyboardConfig,i=$.treeConfig,u=$.editConfig,c=$.highlightCurrentRow,d=Y.ctxMenuStore,s=Y.editStore,f=Y.currentRow,v=Xe.value,g=He.value,h=Ae.value,x=Me.value,m=Le.value,p=Be.value,_=Pe.value,w=Ee.value,b=s.selected,C=s.actived,E=H.keyCode,R=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ESCAPE),T=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.BACKSPACE),y=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.TAB),S=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ENTER),I=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.SPACEBAR),D=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_LEFT),k=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_UP),L=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_RIGHT),U=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_DOWN),O=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.DELETE),M=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.F2),F=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.CONTEXT_MENU),A=H.metaKey,N=H.ctrlKey,V=H.shiftKey,q=H.altKey,z=D||k||L||U,s=v&&d.visible&&(S||I||z),v=(0,_utils.isEnableConf)(u)&&C.column&&C.row;s?(H.preventDefault(),d.showChild&&(0,_utils.hasChildrenList)(d.selected)?lt.moveCtxMenu(H,d,"selectChild",D,!1,d.selected.children):lt.moveCtxMenu(H,d,"selected",L,!0,_)):a&&o&&x.area&&lt.handleKeyboardEvent?lt.handleKeyboardEvent(H):R?(lt.closeMenu&&lt.closeMenu(),G.closeFilter(),a&&h.isEsc&&C.row&&(e=C.args,lt.clearEdit(H),x.selected&&(0,_vue.nextTick)(function(){return lt.handleSelected(e,H)}))):I&&a&&h.isChecked&&b.row&&b.column&&("checkbox"===b.column.type||"radio"===b.column.type)?(H.preventDefault(),"checkbox"===b.column.type?Z.handleToggleCheckRowEvent(H,b.args):Z.triggerRadioRowEvent(H,b.args)):M&&(0,_utils.isEnableConf)(u)?v||b.row&&b.column&&(H.preventDefault(),lt.handleActived(b.args,H)):F?(B._keyCtx=b.row&&b.column&&g.length,clearTimeout(X),X=setTimeout(function(){B._keyCtx=!1},1e3)):S&&!q&&a&&h.isEnter&&(b.row||C.row||i&&(w.isCurrent||c)&&f)?N?C.row&&(r=C.args,lt.clearEdit(H),x.selected&&(0,_vue.nextTick)(function(){return lt.handleSelected(r,H)})):b.row||C.row?(t=(b.row?b:C).args,V?h.enterToTab?lt.moveTabSelected(t,V,H):lt.moveSelected(t,D,!0,L,!1,H):h.enterToTab?lt.moveTabSelected(t,V,H):lt.moveSelected(t,D,!1,L,!0,H)):i&&(w.isCurrent||c)&&f&&((t=f[p.children])&&t.length&&(H.preventDefault(),n=t[0],r={$table:lt,row:n,rowIndex:G.getRowIndex(n),$rowIndex:G.getVMRowIndex(n)},G.setTreeExpand(f,!0).then(function(){return G.scrollToRow(n)}).then(function(){return Z.triggerCurrentRowEvent(H,r)}))):z&&a&&h.isArrow?v||(b.row&&b.column?lt.moveSelected(b.args,D,k,L,U,H):(k||U)&&(w.isCurrent||c)&&lt.moveCurrentRow(k,U,H)):y&&a&&h.isTab?b.row||b.column?lt.moveTabSelected(b.args,V,H):(C.row||C.column)&&lt.moveTabSelected(C.args,V,H):a&&(0,_utils.isEnableConf)(u)&&(O||(i&&(w.isCurrent||c)&&f?T&&h.isArrow:T))?v||(V=h.delMethod,v=h.backMethod,h.isDel&&(b.row||b.column)?(V?V({row:b.row,rowIndex:G.getRowIndex(b.row),column:b.column,columnIndex:G.getColumnIndex(b.column),$table:lt}):(0,_util.setCellValue)(b.row,b.column,null),T?v?v({row:b.row,rowIndex:G.getRowIndex(b.row),column:b.column,columnIndex:G.getColumnIndex(b.column),$table:lt}):lt.handleActived(b.args,H):O&&G.updateFooter()):T&&h.isArrow&&i&&(w.isCurrent||c)&&f&&((l=_xeUtils.default.findTree(B.afterFullData,function(e){return e===f},p).parent)&&(H.preventDefault(),r={$table:lt,row:l,rowIndex:G.getRowIndex(l),$rowIndex:G.getVMRowIndex(l)},G.setTreeExpand(l,!1).then(function(){return G.scrollToRow(l)}).then(function(){return Z.triggerCurrentRowEvent(H,r)})))):a&&(0,_utils.isEnableConf)(u)&&h.isEdit&&!N&&!A&&(I||48<=E&&E<=57||65<=E&&E<=90||96<=E&&E<=111||186<=E&&E<=192||219<=E&&E<=222)&&(h=h.editMethod,b.column&&b.row&&(0,_utils.isEnableConf)(b.column.editRender)&&((m=m.beforeEditMethod||m.activeMethod)&&!m(__assign(__assign({},b.args),{$table:lt}))||(h?h({row:b.row,rowIndex:G.getRowIndex(b.row),column:b.column,columnIndex:G.getColumnIndex(b.column),$table:lt,$grid:me}):((0,_util.setCellValue)(b.row,b.column,null),lt.handleActived(b.args,H))))),G.dispatchEvent("keydown",{},H)})}function U(e){var t=$.keyboardConfig,n=$.mouseConfig,r=Y.editStore,l=Y.filterStore,o=B.isActivated,a=Me.value,i=Ae.value,r=r.actived;o&&!l.visible&&(r.row||r.column||t&&i.isClip&&n&&a.area&&lt.handlePasteCellAreaEvent&&lt.handlePasteCellAreaEvent(e),G.dispatchEvent("paste",{},e))}function O(e){var t=$.keyboardConfig,n=$.mouseConfig,r=Y.editStore,l=Y.filterStore,o=B.isActivated,a=Me.value,i=Ae.value,r=r.actived;o&&!l.visible&&(r.row||r.column||t&&i.isClip&&n&&a.area&&lt.handleCopyCellAreaEvent&&lt.handleCopyCellAreaEvent(e),G.dispatchEvent("copy",{},e))}function M(e){var t=$.keyboardConfig,n=$.mouseConfig,r=Y.editStore,l=Y.filterStore,o=B.isActivated,a=Me.value,i=Ae.value,r=r.actived;o&&!l.visible&&(r.row||r.column||t&&i.isClip&&n&&a.area&&lt.handleCutCellAreaEvent&&lt.handleCutCellAreaEvent(e),G.dispatchEvent("cut",{},e))}function F(){lt.closeMenu&&lt.closeMenu(),Z.updateCellAreas(),G.recalculate(!0)}function N(e){var t=Q.value;clearTimeout(B.tooltipTimeout),e?G.closeTooltip():t&&t.setActived(!0)}function V(e,t,n,r,l){l.cell=t;var o=Y.tooltipStore,a=Ie.value,i=l.column,u=l.row,t=a.showAll,l=(a=a.contentMethod)?a(l):null,c=(a=a&&!_xeUtils.default.eqNull(l))?l:("html"===i.type?n.innerText:n.textContent).trim(),d=n.scrollWidth>n.clientWidth;return c&&(t||a||d)&&(Object.assign(o,{row:u,column:i,visible:!0,currOpts:null}),(0,_vue.nextTick)(function(){var e=Q.value;e&&e.open(!d&&r||n,(0,_utils.formatText)(c))})),(0,_vue.nextTick)()}var q,X,z=e.slots,H=e.emit,P=_vXETable.VXETable.tooltip,j=_xeUtils.default.uniqueId(),W=(0,_size.useSize)($),K=(0,_vue.getCurrentInstance)(),Y=(0,_vue.reactive)({staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selection:[],currentRow:null,currentColumn:null,selectRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandeds:[],expandLazyLoadeds:[],treeExpandeds:[],treeLazyLoadeds:[],treeIndeterminates:[],mergeList:[],mergeFooterList:[],initStore:{filter:!1,import:!1,export:!1},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],scaleList:[],scaleMinList:[],autoList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},insertList:[],removeList:[]},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:null},validStore:{visible:!1,row:null,column:null,content:"",rule:null,isArrow:!1},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1}}),B={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,lastScrollTime:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},tableFullData:[],afterFullData:[],tableFullTreeData:[],afterTreeFullData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1},G={},Z={},J=(0,_vue.ref)(),Q=(0,_vue.ref)(),ee=(0,_vue.ref)(),te=(0,_vue.ref)(),ne=(0,_vue.ref)(),re=(0,_vue.ref)(),le=(0,_vue.ref)(),oe=(0,_vue.ref)(),ae=(0,_vue.ref)(),ie=(0,_vue.ref)(),ue=(0,_vue.ref)(),ce=(0,_vue.ref)(),de=(0,_vue.ref)(),se=(0,_vue.ref)(),fe=(0,_vue.ref)(),ve=(0,_vue.ref)(),ge=(0,_vue.ref)(),he=(0,_vue.ref)(),xe=(0,_vue.ref)(),me=(0,_vue.inject)("$xegrid",null),pe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.validConfig,$.validConfig)}),_e=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollX,$.scrollX)}),we=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollY,$.scrollY)}),be=(0,_vue.computed)(function(){return{default:48,medium:44,small:40,mini:36}}),Ce=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.columnConfig,$.columnConfig)}),Ee=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.rowConfig,$.rowConfig)}),Re=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.resizableConfig,$.resizableConfig)}),Te=(0,_vue.computed)(function(){return Object.assign({startIndex:0},_conf.default.table.seqConfig,$.seqConfig)}),ye=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.radioConfig,$.radioConfig)}),Se=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.checkboxConfig,$.checkboxConfig)}),Ie=((0,_vue.ref)(),(0,_vue.computed)(function(){return Object.assign({},_conf.default.tooltip,_conf.default.table.tooltipConfig,$.tooltipConfig)})),De=(0,_vue.computed)(function(){var e=Y.tooltipStore,t=Ie.value;return __assign(__assign({},t),e.currOpts)}),ke=(0,_vue.computed)(function(){var e=Ie.value;return Object.assign({isArrow:!1},e)}),Le=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.editConfig,$.editConfig)}),Ue=(0,_vue.computed)(function(){return Object.assign({orders:["asc","desc",null]},_conf.default.table.sortConfig,$.sortConfig)}),Oe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.filterConfig,$.filterConfig)}),Me=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.mouseConfig,$.mouseConfig)}),Fe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.areaConfig,$.areaConfig)}),Ae=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.keyboardConfig,$.keyboardConfig)}),Ne=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.clipConfig,$.clipConfig)}),Ve=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.fnrConfig,$.fnrConfig)}),qe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.menuConfig,$.menuConfig)}),ze=(0,_vue.computed)(function(){var e=qe.value.header;return e&&e.options?e.options:[]}),He=(0,_vue.computed)(function(){var e=qe.value.body;return e&&e.options?e.options:[]}),$e=(0,_vue.computed)(function(){var e=qe.value.footer;return e&&e.options?e.options:[]}),Xe=(0,_vue.computed)(function(){var e=qe.value,t=ze.value,n=He.value,r=$e.value;return!!($.menuConfig&&(0,_utils.isEnableConf)(e)&&(t.length||n.length||r.length))}),Pe=(0,_vue.computed)(function(){var e=Y.ctxMenuStore,t=[];return e.list.forEach(function(e){e.forEach(function(e){t.push(e)})}),t}),je=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.exportConfig,$.exportConfig)}),We=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.importConfig,$.importConfig)}),Ke=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.printConfig,$.printConfig)}),Ye=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.expandConfig,$.expandConfig)}),Be=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.treeConfig,$.treeConfig)}),Ge=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.emptyRender,$.emptyRender)}),Ze=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.loadingConfig,$.loadingConfig)}),Je=(0,_vue.computed)(function(){return $.border?Math.max(2,Math.ceil(Y.scrollbarWidth/Y.tableColumn.length)):1}),Qe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.customConfig,$.customConfig)}),et=(0,_vue.computed)(function(){var e=$.border;return!0===e?"full":e||"default"}),tt=(0,_vue.computed)(function(){$.treeConfig;var e=Y.tableData,t=B.tableFullData,n=Se.value,r=n.strict,l=n.checkMethod;return!!r&&(!e.length&&!t.length||!!l&&t.every(function(e){return!l({row:e})}))}),nt={refElem:J,refTooltip:Q,refValidTooltip:te,refTableFilter:ne,refTableMenu:re,refTableHeader:le,refTableBody:oe,refTableFooter:ae,refTableLeftHeader:ie,refTableLeftBody:ue,refTableLeftFooter:ce,refTableRightHeader:de,refTableRightBody:se,refTableRightFooter:fe,refLeftContainer:ve,refRightContainer:ge,refCellResizeBar:he},rt={computeSize:W,computeValidOpts:pe,computeSXOpts:_e,computeSYOpts:we,computeColumnOpts:Ce,computeRowOpts:Ee,computeResizableOpts:Re,computeSeqOpts:Te,computeRadioOpts:ye,computeCheckboxOpts:Se,computeTooltipOpts:Ie,computeEditOpts:Le,computeSortOpts:Ue,computeFilterOpts:Oe,computeMouseOpts:Me,computeAreaOpts:Fe,computeKeyboardOpts:Ae,computeClipOpts:Ne,computeFNROpts:Ve,computeHeaderMenu:ze,computeBodyMenu:He,computeFooterMenu:$e,computeIsMenu:Xe,computeMenuOpts:qe,computeExportOpts:je,computeImportOpts:We,computePrintOpts:Ke,computeExpandOpts:Ye,computeTreeOpts:Be,computeEmptyOpts:Ge,computeLoadingOpts:Ze,computeCustomOpts:Qe,computeIsAllCheckboxDisabled:tt},lt={xID:j,props:$,context:e,instance:K,reactData:Y,internalData:B,getRefMaps:function(){return nt},getComputeMaps:function(){return rt},xegrid:me},ot=function(e){var t=_conf.default.version,e=_xeUtils.default.toStringJSON(localStorage.getItem(e)||"");return e&&e._v===t?e:{_v:t}},at=function(e){var t=B.fullAllDataRowIdData;return e.filter(function(e){e=(0,_util.getRowid)(lt,e);return!!t[e]})},it=function(e){var n=B.fullDataRowIdData,r=[];return _xeUtils.default.each(e,function(e,t){n[t]&&-1===lt.findRowIndexOf(r,n[t].row)&&r.push(n[t].row)}),r},ut=function(){var e=B.visibleColumn,t=oe.value,t=t?t.$el:null;if(t){for(var n=t.scrollLeft,r=n+t.clientWidth,l=-1,o=0,a=0,i=0,u=e.length;i<u&&(o+=e[i].renderWidth,!(0<=(l=-1===l&&n<o?i:l)&&(a++,r<o)));i++);return{toVisibleIndex:Math.max(0,l),visibleSize:Math.max(8,a)}}return{toVisibleIndex:0,visibleSize:8}},ct=function(){var e=le.value,t=oe.value,n=t?t.$el:null,r=W.value,l=be.value;if(n){var o=e?e.$el:null,t=0,e=void 0;return{rowHeight:t=(t=(e=!(e=n.querySelector("tr"))&&o?o.querySelector("tr"):e)?e.clientHeight:t)||l[r||"default"],visibleSize:Math.max(8,Math.ceil(n.clientHeight/t)+2)}}return{rowHeight:0,visibleSize:8}},dt=function(e,t,n){for(var r=0,l=e.length;r<l;r++){var o=e[r],a=t.startIndex,i=t.endIndex,u=o[n],o=u+o[n+"span"];u<a&&a<o&&(t.startIndex=u),u<i&&i<o&&(t.endIndex=o),t.startIndex===a&&t.endIndex===i||(r=-1)}},st=function(e){var t=Y.parentHeight,n=$[e],r=0;return r=n?"auto"===n?t:(e=lt.getExcludeHeight(),r=(0,_dom.isScale)(n)?Math.floor((_xeUtils.default.toInteger(n)||1)/100*t):_xeUtils.default.toNumber(n),Math.max(40,r-e)):r},ft=function(){var d=$.border,s=$.showFooter,f=$.showOverflow,v=$.showHeaderOverflow,g=$.showFooterOverflow,e=$.mouseConfig,h=$.spanMethod,x=$.footerSpanMethod,m=$.keyboardConfig,p=Y.isGroup,t=Y.currentRow,_=Y.tableColumn,w=Y.scrollXLoad,b=Y.scrollYLoad,C=Y.scrollbarWidth,E=Y.scrollbarHeight,n=Y.columnStore,r=Y.editStore,R=Y.mergeList,T=Y.mergeFooterList,y=Y.isAllOverflow,S=B.visibleColumn,I=B.fullColumnIdData,D=B.tableHeight,k=B.tableWidth,L=B.headerHeight,U=B.footerHeight,O=B.elemStore,M=B.customHeight,F=B.customMaxHeight,l=xe.value,A=Je.value,o=Me.value,N=Ae.value,a=O["main-body-wrapper"],a=a?a.value:null;return l&&(l.style.top="".concat(L,"px"),l.style.height=a?"".concat(a.offsetHeight-E,"px"):""),0<M&&s&&(M+=E),["main","left","right"].forEach(function(u,e){var l,a=0<e?u:"",i="left"===a,c=[];a&&(c=i?n.leftList:n.rightList,l=(i?ve:ge).value),["header","body","footer"].forEach(function(o){var e,t=O["".concat(u,"-").concat(o,"-wrapper")],n=t?t.value:null,t=O["".concat(u,"-").concat(o,"-table")],t=t?t.value:null;"header"===o?(r=k,e=!1,p||a&&(w||v)&&(e=!0),r=(_=e?c:_).reduce(function(e,t){return e+t.renderWidth},0),t&&(t.style.width=r?"".concat(r+C,"px"):"",_dom.browse.msie&&_xeUtils.default.arrayEach(t.querySelectorAll(".vxe-resizable"),function(e){e.style.height="".concat(e.parentNode.offsetHeight,"px")})),(e=(e=O["".concat(u,"-").concat(o,"-repair")])?e.value:null)&&(e.style.width="".concat(k,"px")),e=(e=O["".concat(u,"-").concat(o,"-list")])?e.value:null,p&&e&&_xeUtils.default.arrayEach(e.querySelectorAll(".col--group"),function(e){var t,n,r,l=G.getColumnNode(e);l&&(l=(t=l.item).showHeaderOverflow,l=_xeUtils.default.isBoolean(l)?l:v,r=n=0,(l="title"===l||(!0===l||"tooltip"===l)||"ellipsis"===l)&&_xeUtils.default.eachTree(t.children,function(e){e.children&&t.children.length||r++,n+=e.renderWidth},{children:"children"}),e.style.width=l?"".concat(n-r-(d?2:0),"px"):"")})):"body"===o?(e=(e=O["".concat(u,"-").concat(o,"-emptyBlock")])?e.value:null,(0,_dom.isNodeElement)(n)&&(F?n.style.maxHeight="".concat(a?F-L-(s?0:E):F-L,"px"):n.style.height=0<M?"".concat(a?(0<M?M-L-U:D)-(s?0:E):M-L-U,"px"):""),l&&((0,_dom.isNodeElement)(n)&&(n.style.top="".concat(L,"px")),l.style.height="".concat((0<M?M-L-U:D)+L+U-E*(s?2:1),"px"),l.style.width="".concat(c.reduce(function(e,t){return e+t.renderWidth},i?0:C),"px")),r=k,r=(_=a?!(b||f&&y)||R.length||h||m&&N.isMerge?S:c:_).reduce(function(e,t){return e+t.renderWidth},0),t&&(t.style.width=r?"".concat(r,"px"):"",t.style.paddingRight=C&&a&&(_dom.browse["-moz"]||_dom.browse.safari)?"".concat(C,"px"):""),e&&(e.style.width=r?"".concat(r,"px"):"")):"footer"===o&&(r=k,r=(_=a?!w&&!g||T.length&&x?S:c:_).reduce(function(e,t){return e+t.renderWidth},0),(0,_dom.isNodeElement)(n)&&(l&&(n.style.top="".concat(0<M?M-U:D+L,"px")),n.style.marginTop="".concat(-Math.max(1,E),"px")),t&&(t.style.width=r?"".concat(r+C,"px"):""));var r=O["".concat(u,"-").concat(o,"-colgroup")],r=r?r.value:null;r&&_xeUtils.default.arrayEach(r.children,function(e){var a,t,n,r,i,l=e.getAttribute("name");"col_gutter"===l&&(e.style.width="".concat(C,"px")),I[l]&&(t=(a=I[l].column).showHeaderOverflow,n=a.showFooterOverflow,r=a.showOverflow,l=void 0,e.style.width="".concat(a.renderWidth,"px"),i="title"===(l="header"===o?_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?v:t:"footer"===o?_xeUtils.default.isUndefined(n)||_xeUtils.default.isNull(n)?g:n:_xeUtils.default.isUndefined(r)||_xeUtils.default.isNull(r)?f:r)||(!0===l||"tooltip"===l)||"ellipsis"===l,l=(l=O["".concat(u,"-").concat(o,"-list")])?l.value:null,b&&!i&&(i=!0),l&&_xeUtils.default.arrayEach(l.querySelectorAll(".".concat(a.id)),function(e){var t=parseInt(e.getAttribute("colspan")||1),e=e.querySelector(".vxe-cell"),n=a.renderWidth;if(e){if(1<t)for(var r=G.getColumnIndex(a),l=1;l<t;l++){var o=G.getColumns(r+l);o&&(n+=o.renderWidth)}e.style.width=i?"".concat(n-A*t,"px"):""}}))})})}),t&&G.setCurrentRow(t),e&&o.selected&&r.selected.row&&r.selected.column&&lt.addCellSelectedClass(),(0,_vue.nextTick)()},vt=function(t){var n=Y.treeExpandeds,r=Y.treeLazyLoadeds,e=B.fullAllDataRowIdData,l=Be.value,o=Se.value,a=l.transform,i=l.loadMethod,u=o.checkStrictly,c=e[(0,_util.getRowid)(lt,t)];return new Promise(function(e){i?(r.push(t),i({$table:lt,row:t}).then(function(e){if(c.treeLoaded=!0,_xeUtils.default.remove(r,function(e){return lt.eqRow(e,t)}),e=!_xeUtils.default.isArray(e)?[]:e)return G.loadTreeChildren(t,e).then(function(e){return e.length&&-1===lt.findRowIndexOf(n,t)&&n.push(t),!u&&G.isCheckedByCheckboxRow(t)&&G.setCheckboxRow(e,!0),(0,_vue.nextTick)().then(function(){if(a)return Z.handleTableData()})})}).catch(function(){c.treeLoaded=!1,_xeUtils.default.remove(r,function(e){return lt.eqRow(e,t)})}).finally(function(){(0,_vue.nextTick)().then(function(){return G.recalculate()}).then(function(){return e()})})):e()})},gt=function(e,t){var n,r=B.treeExpandedReserveRowMap;Be.value.reserve&&(n=(0,_util.getRowid)(lt,e),t?r[n]=e:r[n]&&delete r[n])},ht=function(){var e=Y.scrollXLoad,t=B.visibleColumn,n=B.scrollXStore,r=B.fullColumnIdData,t=e?t.slice(n.startIndex,n.endIndex):t.slice(0);t.forEach(function(e,t){e=e.id,e=r[e];e&&(e.$index=t)}),Y.tableColumn=t},e=function(n){return function(e){var t=B.fullAllDataRowIdData;if(e){e=t[(0,_util.getRowid)(lt,e)];if(e)return e[n]}return-1}},K=function(n){return function(e){var t=B.fullColumnIdData;if(e){e=t[e.id];if(e)return e[n]}return-1}},xt=_xeUtils.default.debounce(function(e){S(e)},20,{leading:!1,trailing:!0}),G={dispatchEvent:function(e,t,n){H(e,Object.assign({$table:lt,$event:n},t))},clearAll:function(){return(0,_util.clearTableAllStatus)(lt)},syncData:function(){return(0,_vue.nextTick)().then(function(){return Y.tableData=[],H("update:data",B.tableFullData),(0,_vue.nextTick)()})},updateData:function(){var e=Y.scrollXLoad,t=Y.scrollYLoad;return Z.handleTableData(!0).then(function(){if(G.updateFooter(),e||t)return e&&Z.updateScrollXSpace(),t&&Z.updateScrollYSpace(),G.refreshScroll()}).then(function(){return Z.updateCellAreas(),G.recalculate(!0)}).then(function(){setTimeout(function(){return lt.recalculate()},50)})},loadData:function(e){var t=B.inited,n=B.initStatus;return p(e).then(function(){return B.inited=!0,B.initStatus=!0,n||w(),t||T(),G.recalculate()})},reloadData:function(e){var t=B.inited;return G.clearAll().then(function(){return B.inited=!0,B.initStatus=!0,p(e)}).then(function(){return w(),t||T(),G.recalculate()})},reloadRow:function(e,t,n){var r=$.keepSource,l=Y.tableData,o=B.tableSourceData;return r?((r=o[G.getRowIndex(e)])&&e&&(n?(o=_xeUtils.default.get(t||e,n),_xeUtils.default.set(e,n,o),_xeUtils.default.set(r,n,o)):(t=_xeUtils.default.clone(__assign({},t),!0),_xeUtils.default.destructuring(r,Object.assign(e,t)))),Y.tableData=l.slice(0)):"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)()},loadTreeChildren:function(r,e){var l=$.keepSource,o=B.tableSourceData,i=B.fullDataRowIdData,u=B.fullAllDataRowIdData,a=Be.value,c=a.transform,d=a.children,s=a.mapChildren,t=u[(0,_util.getRowid)(lt,r)],f=t?t.level:0;return G.createData(e).then(function(e){var t,n;return l&&(t=(0,_util.getRowid)(lt,r),(n=_xeUtils.default.findTree(o,function(e){return t===(0,_util.getRowid)(lt,e)},a))&&(n.item[d]=_xeUtils.default.clone(e,!0))),_xeUtils.default.eachTree(e,function(e,t,n,r,l,o){var a=(0,_util.getRowid)(lt,e),o={row:e,rowid:a,seq:-1,index:t,_index:-1,$index:-1,items:n,parent:l,level:f+o.length};i[a]=o,u[a]=o},a),r[d]=e,c&&(r[s]=e),C(),e})},loadColumn:function(e){e=_xeUtils.default.mapTree(e,function(e){return(0,_vue.reactive)(_cell.default.createColumn(lt,e))});return l(e)},reloadColumn:function(e){return G.clearAll().then(function(){return G.loadColumn(e)})},getRowNode:function(e){if(e){var t=B.fullAllDataRowIdData,e=e.getAttribute("rowid");if(e){e=t[e];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}}return null},getColumnNode:function(e){if(e){var t=B.fullColumnIdData,e=e.getAttribute("colid");if(e){e=t[e];if(e)return{colid:e.colid,item:e.column,index:e.index,items:e.items,parent:e.parent}}}return null},getRowSeq:e("seq"),getRowIndex:e("index"),getVTRowIndex:e("_index"),getVMRowIndex:e("$index"),getColumnIndex:K("index"),getVTColumnIndex:K("_index"),getVMColumnIndex:K("$index"),createData:function(e){function t(e){return(0,_vue.reactive)(Z.defineField(e||{}))}var n=$.treeConfig,r=Be.value,l=n?_xeUtils.default.mapTree(e,t,r):e.map(t);return(0,_vue.nextTick)().then(function(){return l})},createRow:function(e){var t=_xeUtils.default.isArray(e);return t||(e=[e]),(0,_vue.nextTick)().then(function(){return G.createData(e).then(function(e){return t?e:e[0]})})},revertData:function(e,n){var t=$.keepSource,r=B.tableSourceData,l=B.tableFullData;if(!t)return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)();t=e;return e?_xeUtils.default.isArray(e)||(t=[e]):t=_xeUtils.default.toArray(lt.getUpdateRecords()),t.length&&t.forEach(function(e){var t;G.isInsertByRow(e)||(t=lt.findRowIndexOf(l,e),(t=r[t])&&e&&(n?_xeUtils.default.set(e,n,_xeUtils.default.clone(_xeUtils.default.get(t,n),!0)):_xeUtils.default.destructuring(e,_xeUtils.default.clone(t,!0))))}),e?(0,_vue.nextTick)():G.reloadData(r)},clearData:function(e,t){var n=B.tableFullData,r=B.visibleColumn;return arguments.length?e&&!_xeUtils.default.isArray(e)&&(e=[e]):e=n,t?e.forEach(function(e){return _xeUtils.default.set(e,t,null)}):e.forEach(function(t){r.forEach(function(e){e.field&&(0,_util.setCellValue)(t,e,null)})}),(0,_vue.nextTick)()},isInsertByRow:function(e){var t=Y.editStore;return-1<lt.findRowIndexOf(t.insertList,e)},removeInsertRow:function(){var e=Y.editStore;return lt.remove(e.insertList)},isUpdateByRow:function(e,t){var n=$.keepSource,r=$.treeConfig,l=B.visibleColumn,o=B.tableSourceData,a=B.fullDataRowIdData,i=Be.value;if(n){var u,c=void 0,d=(0,_util.getRowid)(lt,e);if(!a[d])return!1;if(r?(n=i.children,r=_xeUtils.default.findTree(o,function(e){return d===(0,_util.getRowid)(lt,e)},i),e=Object.assign({},e,((i={})[n]=null,i)),r&&(c=Object.assign({},r.item,((r={})[n]=null,r)))):c=o[a[d].index],c){if(1<arguments.length)return!v(c,e,t);for(var s=0,f=l.length;s<f;s++)if((u=l[s].field)&&!v(c,e,u))return!0}}return!1},getColumns:function(e){var t=B.visibleColumn;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getColumnById:function(e){var t=B.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField:function(e){var t=B.fullColumnFieldData;return t[e]?t[e].column:null},getTableColumn:function(){return{collectColumn:B.collectColumn.slice(0),fullColumn:B.tableFullColumn.slice(0),visibleColumn:B.visibleColumn.slice(0),tableColumn:Y.tableColumn.slice(0)}},getData:function(e){var t=$.data||B.tableSynchData;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords:function(e){var t,n=$.treeConfig,r=B.tableFullData,l=B.afterFullData,o=B.afterTreeFullData,a=B.tableFullTreeData,i=Be.value,u=Se.value,c=i.transform,d=i.children,i=i.mapChildren,s=u.checkField,l=e?c?a:r:c?o:l;return s?n?_xeUtils.default.filterTree(l,function(e){return _xeUtils.default.get(e,s)},{children:c?i:d}):l.filter(function(e){return _xeUtils.default.get(e,s)}):(t=Y.selection,n?_xeUtils.default.filterTree(l,function(e){return-1<lt.findRowIndexOf(t,e)},{children:c?i:d}):l.filter(function(e){return-1<lt.findRowIndexOf(t,e)}))},getParentRow:function(e){var t=$.treeConfig,n=B.fullDataRowIdData;if(e&&t){t=void 0;if(t=_xeUtils.default.isString(e)?e:(0,_util.getRowid)(lt,e))return n[t]?n[t].parent:null}return null},getRowById:function(e){var t=B.fullDataRowIdData,e=_xeUtils.default.eqNull(e)?"":encodeURIComponent(e);return t[e]?t[e].row:null},getRowid:function(e){return(0,_util.getRowid)(lt,e)},getTableData:function(){var e=Y.tableData,t=Y.footerTableData,n=B.tableFullData,r=B.afterFullData;return{fullData:n.slice(0),visibleData:r.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},hideColumn:function(e){e=(0,_util.handleFieldOrColumn)(lt,e);return e&&(e.visible=!1),Z.handleCustom()},showColumn:function(e){e=(0,_util.handleFieldOrColumn)(lt,e);return e&&(e.visible=!0),Z.handleCustom()},resetColumn:function(e){var t=B.tableFullColumn,n=Qe.value.checkMethod,r=Object.assign({visible:!0,resizable:!0===e},e);return t.forEach(function(e){r.resizable&&(e.resizeWidth=0),n&&!n({column:e})||(e.visible=e.defaultVisible)}),r.resizable&&Z.saveCustomResizable(!0),Z.handleCustom()},refreshColumn:function(){return g().then(function(){return G.refreshScroll()}).then(function(){return G.recalculate()})},refreshScroll:function(){var t=B.lastScrollLeft,n=B.lastScrollTop,e=oe.value,r=ae.value,l=ue.value,o=se.value,a=e?e.$el:null,i=l?l.$el:null,u=o?o.$el:null,c=r?r.$el:null;return new Promise(function(e){if(t||n)return(0,_util.restoreScrollLocation)(lt,t,n).then(e).then(function(){setTimeout(e,30)});(0,_dom.setScrollTop)(a,n),(0,_dom.setScrollTop)(i,n),(0,_dom.setScrollTop)(u,n),(0,_dom.setScrollLeft)(c,t),setTimeout(e,30)})},recalculate:function(e){return r(),!0===e?d().then(function(){return r(),d()}):d()},openTooltip:function(e,t){var n=ee.value;return n?n.open(e,t):(0,_vue.nextTick)()},closeTooltip:function(){var e=Y.tooltipStore,t=Q.value,n=ee.value;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1}),t&&t.close()),n&&n.close(),(0,_vue.nextTick)()},isAllCheckboxChecked:function(){return Y.isAllSelected},isAllCheckboxIndeterminate:function(){return!Y.isAllSelected&&Y.isIndeterminate},getCheckboxIndeterminateRecords:function(e){var t=$.treeConfig,n=B.afterFullData,r=Y.treeIndeterminates;return t?e?r.slice(0):r.filter(function(e){return-1<lt.findRowIndexOf(n,e)}):[]},setCheckboxRow:function(e,t){return(e=e&&!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){return Z.handleSelectRow({row:e},!!t)}),(0,_vue.nextTick)()},isCheckedByCheckboxRow:function(e){var t=Y.selection,n=Se.value.checkField;return n?_xeUtils.default.get(e,n):-1<lt.findRowIndexOf(t,e)},isIndeterminateByCheckboxRow:function(e){var t=Y.treeIndeterminates;return-1<lt.findRowIndexOf(t,e)&&!G.isCheckedByCheckboxRow(e)},toggleCheckboxRow:function(e){return Z.handleToggleCheckRowEvent(null,{row:e}),(0,_vue.nextTick)()},setAllCheckboxRow:function(t){var e=$.treeConfig,n=Y.selection,r=B.afterFullData,l=B.checkboxReserveRowMap,o=Be.value,a=Se.value,i=a.checkField,u=a.reserve,c=a.checkStrictly,d=a.checkMethod,s=[],a=e?[]:n.filter(function(e){return-1===lt.findRowIndexOf(r,e)});return c?Y.isAllSelected=t:(i?(c=function(e){d&&!d({row:e})||(t&&s.push(e),_xeUtils.default.set(e,i,t))},e?_xeUtils.default.eachTree(r,c,o):r.forEach(c)):e?t?_xeUtils.default.eachTree(r,function(e){d&&!d({row:e})||s.push(e)},o):d&&_xeUtils.default.eachTree(r,function(e){!d({row:e})&&-1<lt.findRowIndexOf(n,e)&&s.push(e)},o):t?s=d?r.filter(function(e){return-1<lt.findRowIndexOf(n,e)||d({row:e})}):r.slice(0):d&&(s=r.filter(function(e){return d({row:e})?0:-1<lt.findRowIndexOf(n,e)})),u&&(t?s.forEach(function(e){l[(0,_util.getRowid)(lt,e)]=e}):r.forEach(function(e){return x(e,!1)})),Y.selection=i?[]:a.concat(s)),Y.treeIndeterminates=[],Z.checkSelectionStatus(),(0,_vue.nextTick)()},getRadioReserveRecord:function(e){var t=$.treeConfig,n=B.fullDataRowIdData,r=B.radioReserveRow,l=B.afterFullData,o=ye.value,a=Be.value;if(o.reserve&&r){var i=(0,_util.getRowid)(lt,r);if(e){if(!n[i])return r}else{var u=(0,_util.getRowkey)(lt);if(t){if(_xeUtils.default.findTree(l,function(e){return i===_xeUtils.default.get(e,u)},a))return r}else if(!l.some(function(e){return i===_xeUtils.default.get(e,u)}))return r}}return null},clearRadioReserve:function(){return(B.radioReserveRow=null,_vue.nextTick)()},getCheckboxReserveRecords:function(n){var r,e=$.treeConfig,t=B.afterFullData,l=B.fullDataRowIdData,o=B.checkboxReserveRowMap,a=Se.value,i=Be.value,u=[];return a.reserve&&(r={},e?_xeUtils.default.eachTree(t,function(e){r[(0,_util.getRowid)(lt,e)]=1},i):t.forEach(function(e){r[(0,_util.getRowid)(lt,e)]=1}),_xeUtils.default.each(o,function(e,t){e&&(n?l[t]||u.push(e):r[t]||u.push(e))})),u},clearCheckboxReserve:function(){return B.checkboxReserveRowMap={},(0,_vue.nextTick)()},toggleAllCheckboxRow:function(){return Z.triggerCheckAllEvent(null,!Y.isAllSelected),(0,_vue.nextTick)()},clearCheckboxRow:function(){var e=$.treeConfig,t=B.tableFullData,n=Be.value,r=Se.value,l=r.checkField,r=r.reserve;return l&&(e?_xeUtils.default.eachTree(t,function(e){return _xeUtils.default.set(e,l,!1)},n):t.forEach(function(e){return _xeUtils.default.set(e,l,!1)})),r&&t.forEach(function(e){return x(e,!1)}),Y.isAllSelected=!1,Y.isIndeterminate=!1,Y.selection=[],Y.treeIndeterminates=[],(0,_vue.nextTick)()},setCurrentRow:function(e){var t=Ee.value,n=J.value;return G.clearCurrentRow(),G.clearCurrentColumn(),Y.currentRow=e,(t.isCurrent||$.highlightCurrentRow)&&n&&_xeUtils.default.arrayEach(n.querySelectorAll('[rowid="'.concat((0,_util.getRowid)(lt,e),'"]')),function(e){return(0,_dom.addClass)(e,"row--current")}),(0,_vue.nextTick)()},isCheckedByRadioRow:function(e){return lt.eqRow(Y.selectRow,e)},setRadioRow:function(e){var t=ye.value.checkMethod;return!e||t&&!t({row:e})||(Y.selectRow=e,e=e,ye.value.reserve&&(B.radioReserveRow=e)),(0,_vue.nextTick)()},clearCurrentRow:function(){var e=J.value;return Y.currentRow=null,B.hoverRow=null,e&&_xeUtils.default.arrayEach(e.querySelectorAll(".row--current"),function(e){return(0,_dom.removeClass)(e,"row--current")}),(0,_vue.nextTick)()},clearRadioRow:function(){return(Y.selectRow=null,_vue.nextTick)()},getCurrentRecord:function(){return Ee.value.isCurrent||$.highlightCurrentRow?Y.currentRow:null},getRadioRecord:function(e){var t=$.treeConfig,n=B.fullDataRowIdData,r=B.afterFullData,l=Y.selectRow,o=Be.value;if(l){var a=(0,_util.getRowid)(lt,l);if(e){if(!n[a])return l}else if(t){var i=(0,_util.getRowkey)(lt);if(_xeUtils.default.findTree(r,function(e){return a===_xeUtils.default.get(e,i)},o))return l}else if(-1<lt.findRowIndexOf(r,l))return l}return null},getCurrentColumn:function(){return Ce.value.isCurrent||$.highlightCurrentColumn?Y.currentColumn:null},setCurrentColumn:function(e){e=(0,_util.handleFieldOrColumn)(lt,e);return e&&(G.clearCurrentRow(),G.clearCurrentColumn(),Y.currentColumn=e),(0,_vue.nextTick)()},clearCurrentColumn:function(){return(Y.currentColumn=null,_vue.nextTick)()},sort:function(e,t){var n=Ue.value,r=n.multiple,l=n.remote,o=n.orders;return e&&_xeUtils.default.isString(e)&&(e=[{field:e,order:t}]),(e=!_xeUtils.default.isArray(e)?[e]:e).length?(r||a(),(r?e:[e[0]]).forEach(function(e,t){var n=e.field,r=e.order,e=n;(e=_xeUtils.default.isString(n)?G.getColumnByField(n):e)&&e.sortable&&(-1===o.indexOf(r)&&(r=c(e)),e.order!==r&&(e.order=r),e.sortTime=Date.now()+t)}),l||Z.handleTableData(!0),(0,_vue.nextTick)().then(ft)):(0,_vue.nextTick)()},clearSort:function(e){var t=Ue.value;return e?(e=(0,_util.handleFieldOrColumn)(lt,e))&&(e.order=null):a(),t.remote||Z.handleTableData(!0),(0,_vue.nextTick)().then(ft)},isSort:function(e){if(e){e=(0,_util.handleFieldOrColumn)(lt,e);return!!e&&(e.sortable&&!!e.order)}return 0<G.getSortColumns().length},getSortColumns:function(){var e=Ue.value,t=e.multiple,e=e.chronological,r=[];return B.tableFullColumn.forEach(function(e){var t=e.field,n=e.order;e.sortable&&n&&r.push({column:e,field:t,property:t,order:n,sortTime:e.sortTime})}),t&&e&&1<r.length?_xeUtils.default.orderBy(r,"sortTime"):r},closeFilter:function(){var e=Y.filterStore,t=e.column,n=e.visible;return Object.assign(e,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),n&&lt.dispatchEvent("filter-visible",{column:t,property:t.field,field:t.field,filterList:lt.getCheckedFilters(),visible:!1},null),(0,_vue.nextTick)()},isFilter:function(e){e=(0,_util.handleFieldOrColumn)(lt,e);return e?e.filters&&e.filters.some(function(e){return e.checked}):0<lt.getCheckedFilters().length},isRowExpandLoaded:function(e){e=B.fullAllDataRowIdData[(0,_util.getRowid)(lt,e)];return e&&!!e.expandLoaded},clearRowExpandLoaded:function(t){var e=Y.expandLazyLoadeds,n=B.fullAllDataRowIdData,r=Ye.value.lazy,n=n[(0,_util.getRowid)(lt,t)];return r&&n&&(n.expandLoaded=!1,_xeUtils.default.remove(e,function(e){return lt.eqRow(e,t)})),(0,_vue.nextTick)()},reloadRowExpand:function(e){var t=Y.expandLazyLoadeds;return Ye.value.lazy&&-1===lt.findRowIndexOf(t,e)&&G.clearRowExpandLoaded(e).then(function(){return h(e)}),(0,_vue.nextTick)()},reloadExpandContent:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),G.reloadRowExpand(e)},toggleRowExpand:function(e){return G.setRowExpand(e,!G.isExpandByRow(e))},setAllRowExpand:function(e){var t=Ye.value;return G.setRowExpand(t.lazy?Y.tableData:B.tableFullData,e)},setRowExpand:function(e,t){var n,r=Y.rowExpandeds,l=Y.expandLazyLoadeds,o=Y.expandColumn,a=B.fullAllDataRowIdData,i=Ye.value,u=i.reserve,c=i.lazy,d=i.accordion,s=i.toggleMethod,f=[],v=G.getColumnIndex(o),g=G.getVMColumnIndex(o);return e&&(_xeUtils.default.isArray(e)||(e=[e]),d&&(r=[],e=e.slice(e.length-1,e.length)),n=s?e.filter(function(e){return s({$table:lt,expanded:t,column:o,columnIndex:v,$columnIndex:g,row:e,rowIndex:G.getRowIndex(e),$rowIndex:G.getVMRowIndex(e)})}):e,t?n.forEach(function(e){var t;-1===lt.findRowIndexOf(r,e)&&(t=a[(0,_util.getRowid)(lt,e)],c&&!t.expandLoaded&&-1===lt.findRowIndexOf(l,e)?f.push(h(e)):r.push(e))}):_xeUtils.default.remove(r,function(e){return-1<lt.findRowIndexOf(n,e)}),u&&n.forEach(function(e){return m(e,t)})),Y.rowExpandeds=r,Promise.all(f).then(function(){return G.recalculate()})},isExpandByRow:function(e){var t=Y.rowExpandeds;return-1<lt.findRowIndexOf(t,e)},clearRowExpand:function(){var e=Y.rowExpandeds,t=B.tableFullData,n=Ye.value.reserve,r=e.length;return Y.rowExpandeds=[],n&&t.forEach(function(e){return m(e,!1)}),(0,_vue.nextTick)().then(function(){r&&G.recalculate()})},clearRowExpandReserve:function(){return B.rowExpandedReserveRowMap={},(0,_vue.nextTick)()},getRowExpandRecords:function(){return Y.rowExpandeds.slice(0)},getTreeExpandRecords:function(){return Y.treeExpandeds.slice(0)},isTreeExpandLoaded:function(e){e=B.fullAllDataRowIdData[(0,_util.getRowid)(lt,e)];return e&&!!e.treeLoaded},clearTreeExpandLoaded:function(t){var e=Y.treeExpandeds,n=B.fullAllDataRowIdData,r=Be.value,l=r.transform,r=r.lazy,n=n[(0,_util.getRowid)(lt,t)];return r&&n&&(n.treeLoaded=!1,_xeUtils.default.remove(e,function(e){return lt.eqRow(e,t)})),l?(E(),Z.handleTableData()):(0,_vue.nextTick)()},reloadTreeExpand:function(e){var t=Y.treeLazyLoadeds,n=Be.value,r=n.transform,l=n.lazy,n=n.hasChild;return l&&e[n]&&-1===lt.findRowIndexOf(t,e)&&G.clearTreeExpandLoaded(e).then(function(){return vt(e)}).then(function(){if(r)return E(),Z.handleTableData()}).then(function(){return G.recalculate()}),(0,_vue.nextTick)()},reloadTreeChilds:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),G.reloadTreeExpand(e)},toggleTreeExpand:function(e){return G.setTreeExpand(e,!G.isTreeExpandByRow(e))},setAllTreeExpand:function(e){var t=B.tableFullData,n=Be.value,r=n.transform,l=n.lazy,o=n.children,a=[];return _xeUtils.default.eachTree(t,function(e){var t=e[o];(l||t&&t.length)&&a.push(e)},n),G.setTreeExpand(a,e).then(function(){if(r)return E(),G.recalculate()})},setTreeExpand:function(e,t){var n=Be.value.transform;return e&&(e=!_xeUtils.default.isArray(e)?[e]:e).length?n?o(e,t).then(function(){return E(),Z.handleTableData()}).then(function(){return G.recalculate()}):o(e,t):(0,_vue.nextTick)()},isTreeExpandByRow:function(e){var t=Y.treeExpandeds;return-1<lt.findRowIndexOf(t,e)},clearTreeExpand:function(){var e=Y.treeExpandeds,t=B.tableFullTreeData,n=Be.value,r=n.transform,l=n.reserve,o=e.length;return Y.treeExpandeds=[],l&&_xeUtils.default.eachTree(t,function(e){return gt(e,!1)},n),Z.handleTableData().then(function(){if(r)return E(),Z.handleTableData()}).then(function(){if(o)return G.recalculate()})},clearTreeExpandReserve:function(){return B.treeExpandedReserveRowMap={},(0,_vue.nextTick)()},getScroll:function(){var e=Y.scrollXLoad,t=Y.scrollYLoad,n=oe.value.$el;return{virtualX:e,virtualY:t,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}},scrollTo:function(e,t){var n=oe.value,r=ae.value,l=se.value,n=n?n.$el:null,l=l?l.$el:null,r=r?r.$el:null;return _xeUtils.default.isNumber(e)&&(0,_dom.setScrollLeft)(r||n,e),_xeUtils.default.isNumber(t)&&(0,_dom.setScrollTop)(l||n,t),Y.scrollXLoad||Y.scrollYLoad?new Promise(function(e){return setTimeout(function(){return e((0,_vue.nextTick)())},50)}):(0,_vue.nextTick)()},scrollToRow:function(e,t){var n=[];return e&&($.treeConfig?n.push(Z.scrollToTreeRow(e)):n.push((0,_util.rowToVisible)(lt,e))),t&&n.push(G.scrollToColumn(t)),Promise.all(n)},scrollToColumn:function(e){var t=B.fullColumnIdData,e=(0,_util.handleFieldOrColumn)(lt,e);return e&&t[e.id]?(0,_util.colToVisible)(lt,e):(0,_vue.nextTick)()},clearScroll:function(){var e=B.scrollXStore,t=B.scrollYStore,n=oe.value,r=ae.value,l=se.value,n=n?n.$el:null,l=l?l.$el:null,r=r?r.$el:null;return l&&((0,_util.restoreScrollListener)(l),l.scrollTop=0),r&&(r.scrollLeft=0),n&&((0,_util.restoreScrollListener)(n),n.scrollTop=0,n.scrollLeft=0),e.startIndex=0,(t.startIndex=0,_vue.nextTick)()},updateFooter:function(){var e=$.showFooter,t=$.footerMethod,n=B.visibleColumn,r=B.afterFullData;return e&&t&&(Y.footerTableData=n.length?t({columns:n,data:r,$table:lt,$grid:me}):[]),(0,_vue.nextTick)()},updateStatus:function(a,i){var u=!_xeUtils.default.isUndefined(i);return(0,_vue.nextTick)().then(function(){var e=$.editRules,t=Y.validStore,n=oe.value;if(a&&n&&e){var r=a.row,l=a.column;if(lt.hasCellRules&&lt.hasCellRules("change",r,l)){var o=Z.getCell(r,l);if(o)return lt.validCellRules("change",r,l,i).then(function(){u&&t.visible&&(0,_util.setCellValue)(r,l,i),lt.clearValidate()}).catch(function(e){e=e.rule;u&&(0,_util.setCellValue)(r,l,i),lt.showValidTooltip({rule:e,row:r,column:l,cell:o})})}}})},setMergeCells:function(e){return $.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),t(e,Y.mergeList,B.afterFullData),(0,_vue.nextTick)().then(function(){return Z.updateCellAreas()})},removeMergeCells:function(e){$.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]);var t=n(e,Y.mergeList,B.afterFullData);return(0,_vue.nextTick)().then(function(){return Z.updateCellAreas(),t})},getMergeCells:function(){return Y.mergeList.slice(0)},clearMergeCells:function(){return Y.mergeList=[],(0,_vue.nextTick)()},setMergeFooterItems:function(e){return $.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),t(e,Y.mergeFooterList),(0,_vue.nextTick)().then(function(){return Z.updateCellAreas()})},removeMergeFooterItems:function(e){$.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);var t=n(e,Y.mergeFooterList);return(0,_vue.nextTick)().then(function(){return Z.updateCellAreas(),t})},getMergeFooterItems:function(){return Y.mergeFooterList.slice(0)},clearMergeFooterItems:function(){return Y.mergeFooterList=[],(0,_vue.nextTick)()},focus:function(){return B.isActivated=!0,(0,_vue.nextTick)()},blur:function(){return(B.isActivated=!1,_vue.nextTick)()},connect:function(e){return e?(q=e).syncUpdate({collectColumn:B.collectColumn,$table:lt}):(0,_log.errLog)("vxe.error.barUnableLink"),(0,_vue.nextTick)()}},Z={getSetupOptions:function(){return _conf.default},updateAfterDataIndex:C,callSlot:function(e,t){if(e){if(me)return me.callSlot(e,t);if(_xeUtils.default.isFunction(e))return(0,_vn.getSlotVNs)(e(t))}return[]},getParentElem:function(){var e=J.value;if(me){var t=me.getRefMaps().refElem.value;return t?t.parentNode:null}return e?e.parentNode:null},getParentHeight:function(){var e=$.height,t=J.value;if(t){t=t.parentNode,e="auto"===e?(0,_dom.getPaddingTopBottomSize)(t):0;return Math.floor(me?me.getParentHeight():_xeUtils.default.toNumber(getComputedStyle(t).height)-e)}return 0},getExcludeHeight:function(){return me?me.getExcludeHeight():0},defineField:function(l){var e=$.treeConfig,t=Ye.value,n=Be.value,r=ye.value,o=Se.value,a=(0,_util.getRowkey)(lt);return B.tableFullColumn.forEach(function(e){var t,n=e.field,r=e.editRender;!n||_xeUtils.default.has(l,n)||l[n]||(t=null,r&&(r=r.defaultValue,_xeUtils.default.isFunction(r)?t=r({column:e}):_xeUtils.default.isUndefined(r)||(t=r)),_xeUtils.default.set(l,n,t))}),[r.labelField,o.checkField,o.labelField,t.labelField].forEach(function(e){e&&(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,e))&&_xeUtils.default.set(l,e,null)}),e&&n.lazy&&_xeUtils.default.isUndefined(l[n.children])&&(l[n.children]=null),(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,a))&&_xeUtils.default.set(l,a,(0,_util.getRowUniqueId)()),l},handleTableData:function(e){var i,u,t,n,r,l,o,a,c,d,s,f,v,g,h,x,m=Y.scrollYLoad,p=B.scrollYStore,_=B.fullDataRowIdData,w=B.afterFullData;e&&(n=$.treeConfig,r=B.tableFullColumn,l=B.tableFullData,o=B.tableFullTreeData,a=Oe.value,c=Ue.value,d=Be.value,s=d.transform,f=a.remote,v=a.filterMethod,g=c.remote,h=c.sortMethod,x=c.multiple,e=c.chronological,a=[],c=[],f&&g?n&&s?a=c=_xeUtils.default.searchTree(o,function(){return!0},__assign(__assign({},d),{original:!0})):c=a=(n?o:l).slice(0):(i=[],u=[],r.forEach(function(e){var t,n,r=e.field,l=e.sortable,o=e.order,a=e.filters;!f&&a&&a.length&&(t=[],n=[],a.forEach(function(e){e.checked&&(n.push(e),t.push(e.value))}),n.length&&i.push({column:e,valueList:t,itemList:n})),!g&&l&&o&&u.push({column:e,field:r,property:r,order:o,sortTime:e.sortTime})}),x&&e&&1<u.length&&(u=_xeUtils.default.orderBy(u,"sortTime")),!f&&i.length?(e=function(u){return i.every(function(e){var t=e.column,n=e.valueList,r=e.itemList,l=t.filterMethod,e=t.filterRender,e=e?_vXETable.VXETable.renderer.get(e.name):null,o=e?e.filterMethod:null,a=e?e.defaultFilterMethod:null,i=(0,_util.getCellValue)(u,t);return l?r.some(function(e){return l({value:e.value,option:e,cellValue:i,row:u,column:t,$table:lt})}):o?r.some(function(e){return o({value:e.value,option:e,cellValue:i,row:u,column:t,$table:lt})}):v?v({options:r,values:n,cellValue:i,row:u,column:t}):a?r.some(function(e){return a({value:e.value,option:e,cellValue:i,row:u,column:t,$table:lt})}):-1<n.indexOf(_xeUtils.default.get(u,t.field))})},n&&s?a=c=_xeUtils.default.searchTree(o,e,__assign(__assign({},d),{original:!0})):c=a=(n?o:l).filter(e)):n&&s?a=c=_xeUtils.default.searchTree(o,function(){return!0},__assign(__assign({},d),{original:!0})):c=a=(n?o:l).slice(0),!g&&u.length&&(n&&s?a=c=h?(t=h({data:c,sortList:u,$table:lt}),_xeUtils.default.isArray(t)?t:c):_xeUtils.default.orderBy(c,u.map(function(e){var t=e.column,e=e.order;return[b(t),e]})):c=a=h?(t=h({data:a,sortList:u,$table:lt}),_xeUtils.default.isArray(t)?t:a):_xeUtils.default.orderBy(a,u.map(function(e){var t=e.column,e=e.order;return[b(t),e]})))),B.afterFullData=a,B.afterTreeFullData=c,C(),w=E());w=m?w.slice(p.startIndex,p.endIndex):w.slice(0);return w.forEach(function(e,t){e=(0,_util.getRowid)(lt,e),e=_[e];e&&(e.$index=t)}),Y.tableData=w,(0,_vue.nextTick)()},cacheRowMap:function(i){function e(e,t,n,r,l,o){var a=(0,_util.getRowid)(lt,e),r=u&&r?(0,_util.toTreePathSeq)(r):t+1,o=o?o.length-1:0;(0,_utils.eqEmptyValue)(a)&&(a=(0,_util.getRowUniqueId)(),_xeUtils.default.set(e,f,a)),v&&e[c.hasChild]&&_xeUtils.default.isUndefined(e[c.children])&&(e[c.children]=null),o={row:e,rowid:a,seq:r,index:u&&l?-1:t,_index:-1,$index:-1,items:n,parent:l,level:o},i&&(d[a]=o),s[a]=o}var u=$.treeConfig,c=Be.value,d=B.fullDataRowIdData,s=B.fullAllDataRowIdData,t=B.tableFullData,n=B.tableFullTreeData,f=(0,_util.getRowkey)(lt),v=u&&c.lazy;i&&(d=B.fullDataRowIdData={}),s=B.fullAllDataRowIdData={},u?_xeUtils.default.eachTree(n,e,c):t.forEach(e)},analyColumnWidth:function(){var e=B.tableFullColumn,t=Ce.value,n=t.width,r=t.minWidth,l=[],o=[],a=[],i=[],u=[],c=[];e.forEach(function(e){n&&!e.width&&(e.width=n),r&&!e.minWidth&&(e.minWidth=r),e.visible&&(e.resizeWidth?l:(0,_dom.isPx)(e.width)?o:(0,_dom.isScale)(e.width)?i:(0,_dom.isPx)(e.minWidth)?a:(0,_dom.isScale)(e.minWidth)?u:c).push(e)}),Object.assign(Y.columnStore,{resizeList:l,pxList:o,pxMinList:a,scaleList:i,scaleMinList:u,autoList:c})},saveCustomResizable:function(e){var n,t=$.id,r=$.customConfig,l=Qe.value,o=B.collectColumn,l=l.storage,l=!0===l||l&&l.resizable;r&&l&&(l=ot(resizableStorageKey),t?(e||(n=_xeUtils.default.isPlainObject(l[t])?l[t]:{},_xeUtils.default.eachTree(o,function(e){var t;!e.resizeWidth||(t=e.getKey())&&(n[t]=e.renderWidth)})),l[t]=_xeUtils.default.isEmpty(n)?void 0:n,localStorage.setItem(resizableStorageKey,_xeUtils.default.toJSONString(l))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},saveCustomVisible:function(){var n,r,e=$.id,t=$.customConfig,l=B.collectColumn,o=Qe.value,a=o.checkMethod,o=o.storage,o=!0===o||o&&o.visible;t&&o&&(o=ot(visibleStorageKey),n=[],r=[],e?(_xeUtils.default.eachTree(l,function(e){var t;a&&!a({column:e})||(!e.visible&&e.defaultVisible?(t=e.getKey())&&n.push(t):e.visible&&!e.defaultVisible&&(t=e.getKey())&&r.push(t))}),o[e]=[n.join(",")].concat(r.length?[r.join(",")]:[]).join("|")||void 0,localStorage.setItem(visibleStorageKey,_xeUtils.default.toJSONString(o))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},handleCustom:function(){return Z.saveCustomVisible(),Z.analyColumnWidth(),G.refreshColumn()},preventEvent:function(t,e,n,r,l){var o;return _vXETable.VXETable.interceptor.get(e).some(function(e){return!1===e(Object.assign({$grid:me,$table:lt,$event:t},n))})||r&&(o=r()),l&&l(),o},checkSelectionStatus:function(){var t,n,e=$.treeConfig,r=Y.selection,l=Y.treeIndeterminates,o=B.afterFullData,a=Se.value,i=a.checkField,u=a.halfField,c=a.checkStrictly,d=a.checkMethod;c||(t=[],c=a=!(n=[]),c=i?(a=o.every(d?function(e){return d({row:e})?!!_xeUtils.default.get(e,i)&&(n.push(e),!0):(t.push(e),!0)}:function(e){return _xeUtils.default.get(e,i)})&&o.length!==t.length,e?u?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,u)||-1<lt.findRowIndexOf(l,e)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)||-1<lt.findRowIndexOf(l,e)}):u?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,u)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)})):(a=o.every(d?function(e){return d({row:e})?-1<lt.findRowIndexOf(r,e)&&(n.push(e),!0):(t.push(e),!0)}:function(e){return-1<lt.findRowIndexOf(r,e)})&&o.length!==t.length,e?!a&&o.some(function(e){return-1<lt.findRowIndexOf(l,e)||-1<lt.findRowIndexOf(r,e)}):!a&&o.some(function(e){return-1<lt.findRowIndexOf(r,e)})),Y.isAllSelected=a,Y.isIndeterminate=c)},handleSelectRow:function(e,n){var t,r=e.row,l=$.treeConfig,o=Y.selection,a=Y.treeIndeterminates,i=B.afterFullData,u=Be.value,c=Se.value,d=c.checkField,e=c.checkStrictly,s=c.checkMethod;if(d)if(l&&!e){if(-1===n?(-1===lt.findRowIndexOf(a,r)&&a.push(r),_xeUtils.default.set(r,d,!1)):_xeUtils.default.eachTree([r],function(t){!lt.eqRow(t,r)&&s&&!s({row:t})||(_xeUtils.default.set(t,d,n),_xeUtils.default.remove(a,function(e){return lt.eqRow(e,t)}),x(r,n))},u),(t=_xeUtils.default.findTree(i,function(e){return lt.eqRow(e,r)},u))&&t.parent){var f=void 0,v=s?t.items.filter(function(e){return s({row:e})}):t.items;return f=_xeUtils.default.find(t.items,function(e){return-1<lt.findRowIndexOf(a,e)})?-1:(g=t.items.filter(function(e){return _xeUtils.default.get(e,d)})).filter(function(e){return-1<lt.findRowIndexOf(v,e)}).length===v.length||!(!g.length&&-1!==n)&&-1,Z.handleSelectRow({row:t.parent},f)}}else s&&!s({row:r})||(_xeUtils.default.set(r,d,n),x(r,n));else if(l&&!e){if(-1===n?(-1===lt.findRowIndexOf(a,r)&&a.push(r),_xeUtils.default.remove(o,function(e){return lt.eqRow(e,r)})):_xeUtils.default.eachTree([r],function(t){!lt.eqRow(t,r)&&s&&!s({row:t})||(n?o.push(t):_xeUtils.default.remove(o,function(e){return lt.eqRow(e,t)}),_xeUtils.default.remove(a,function(e){return lt.eqRow(e,t)}),x(r,n))},u),(t=_xeUtils.default.findTree(i,function(e){return lt.eqRow(e,r)},u))&&t.parent){var g,f=void 0,h=s?t.items.filter(function(e){return s({row:e})}):t.items;return f=_xeUtils.default.find(t.items,function(e){return-1<lt.findRowIndexOf(a,e)})?-1:(g=t.items.filter(function(e){return-1<lt.findRowIndexOf(o,e)})).filter(function(e){return-1<lt.findRowIndexOf(h,e)}).length===h.length||!(!g.length&&-1!==n)&&-1,Z.handleSelectRow({row:t.parent},f)}}else s&&!s({row:r})||(n?-1===lt.findRowIndexOf(o,r)&&o.push(r):_xeUtils.default.remove(o,function(e){return lt.eqRow(e,r)}),x(r,n));Z.checkSelectionStatus()},triggerHeaderHelpEvent:function(t,e){var n,r=e.column,e=r.titlePrefix||r.titleHelp;(e.content||e.message)&&(r=Y.tooltipStore,n=(0,_utils.getFuncText)(e.content||e.message),N(!0),r.visible=!0,r.currOpts=__assign(__assign({},e),{content:null}),(0,_vue.nextTick)(function(){var e=Q.value;e&&e.open(t.currentTarget,n)}))},triggerHeaderTooltipEvent:function(e,t){var n=Y.tooltipStore,r=t.column,e=e.currentTarget;N(!0),n.column===r&&n.visible||V(0,e,e,null,t)},triggerBodyTooltipEvent:function(e,t){var n=$.editConfig,r=Y.editStore,l=Y.tooltipStore,o=Le.value,a=r.actived,i=t.row,r=t.column,e=e.currentTarget;N(l.column!==r||l.row!==i),(0,_utils.isEnableConf)(n)&&("row"===o.mode&&a.row===i||a.row===i&&a.column===r)||l.column===r&&l.row===i&&l.visible||(l=i=void 0,r.treeNode?(i=e.querySelector(".vxe-tree-cell"),"html"===r.type&&(l=e.querySelector(".vxe-cell--html"))):l=e.querySelector("html"===r.type?".vxe-cell--html":".vxe-cell--label"),V(0,e,i||e.children[0],l,t))},triggerFooterTooltipEvent:function(e,t){var n=t.column,r=Y.tooltipStore,e=e.currentTarget;N(r.column!==n||r.row),r.column===n&&r.visible||V(0,e,e.querySelector(".vxe-cell--item")||e.children[0],null,t)},handleTargetLeaveEvent:function(){var e=Ie.value,t=Q.value;t&&t.setActived(!1),e.enterable?B.tooltipTimeout=setTimeout(function(){(t=Q.value)&&!t.isActived()&&G.closeTooltip()},e.leaveDelay):G.closeTooltip()},triggerHeaderCellClickEvent:function(e,t){var n=B._lastResizeTime,r=Ue.value,l=Ce.value,o=t.column,a=e.currentTarget,i=n&&n>Date.now()-300,u=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--sort").flag,n=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--filter").flag;"cell"!==r.trigger||i||u||n||Z.triggerSortEvent(e,o,c(o)),G.dispatchEvent("header-cell-click",Object.assign({triggerResizable:i,triggerSort:u,triggerFilter:n,cell:a},t),e),(l.isCurrent||$.highlightCurrentColumn)&&G.setCurrentColumn(o)},triggerHeaderCellDblclickEvent:function(e,t){G.dispatchEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},triggerCellClickEvent:function(e,t){var n=$.highlightCurrentRow,r=$.editConfig,l=Y.editStore,o=Ye.value,a=Le.value,i=Be.value,u=ye.value,c=Se.value,d=Ee.value,s=l.actived,f=t.row,v=t.column,g=v.type,h=v.treeNode,x="radio"===g,m="checkbox"===g,p="expand"===g,_=e.currentTarget,w=x&&(0,_dom.getEventTargetNode)(e,_,"vxe-cell--radio").flag,b=m&&(0,_dom.getEventTargetNode)(e,_,"vxe-cell--checkbox").flag,l=h&&(0,_dom.getEventTargetNode)(e,_,"vxe-tree--btn-wrapper").flag,g=p&&(0,_dom.getEventTargetNode)(e,_,"vxe-table--expanded").flag;t=Object.assign({cell:_,triggerRadio:w,triggerCheckbox:b,triggerTreeNode:l,triggerExpandNode:g},t),b||w||(!g&&("row"===o.trigger||p&&"cell"===o.trigger)&&Z.triggerRowExpandEvent(e,t),("row"===i.trigger||h&&"cell"===i.trigger)&&Z.triggerTreeExpandEvent(e,t)),l||(g||((d.isCurrent||n)&&(b||w||Z.triggerCurrentRowEvent(e,t)),!w&&("row"===u.trigger||x&&"cell"===u.trigger)&&Z.triggerRadioRowEvent(e,t),!b&&("row"===c.trigger||m&&"cell"===c.trigger)&&Z.handleToggleCheckRowEvent(e,t)),(0,_utils.isEnableConf)(r)&&("manual"===a.trigger?s.args&&s.row===f&&v!==s.column&&R(e,t):s.args&&f===s.row&&v===s.column||("click"===a.trigger||"dblclick"===a.trigger&&"row"===a.mode&&s.row===f)&&R(e,t))),G.dispatchEvent("cell-click",t,e)},triggerCellDblclickEvent:function(e,t){var n=$.editConfig,r=Y.editStore,l=Le.value,o=r.actived,r=e.currentTarget;t=Object.assign({cell:r},t),(0,_utils.isEnableConf)(n)&&"dblclick"===l.trigger&&(o.args&&e.currentTarget===o.args.cell||("row"===l.mode?i("blur").catch(function(e){return e}).then(function(){lt.handleActived(t,e).then(function(){return i("change")}).catch(function(e){return e})}):"cell"===l.mode&&lt.handleActived(t,e).then(function(){return i("change")}).catch(function(e){return e}))),G.dispatchEvent("cell-dblclick",t,e)},handleToggleCheckRowEvent:function(e,t){var n=Y.selection,r=Se.value.checkField,l=t.row,l=r?!_xeUtils.default.get(l,r):-1===lt.findRowIndexOf(n,l);e?Z.triggerCheckRowEvent(e,t,l):Z.handleSelectRow(t,l)},triggerCheckRowEvent:function(e,t,n){var r=Se.value.checkMethod;r&&!r({row:t.row})||(Z.handleSelectRow(t,n),G.dispatchEvent("checkbox-change",Object.assign({records:G.getCheckboxRecords(),reserves:G.getCheckboxReserveRecords(),indeterminates:G.getCheckboxIndeterminateRecords(),checked:n},t),e))},triggerCheckAllEvent:function(e,t){G.setAllCheckboxRow(t),e&&G.dispatchEvent("checkbox-all",{records:G.getCheckboxRecords(),reserves:G.getCheckboxReserveRecords(),indeterminates:G.getCheckboxIndeterminateRecords(),checked:t},e)},triggerRadioRowEvent:function(e,t){var n=Y.selectRow,r=t.row,l=ye.value,o=r,r=n!==o;r?G.setRadioRow(o):l.strict||(r=n===o)&&(o=null,G.clearRadioRow()),r&&G.dispatchEvent("radio-change",__assign({oldValue:n,newValue:o},t),e)},triggerCurrentRowEvent:function(e,t){var n=Y.currentRow,r=t.row,l=n!==r;G.setCurrentRow(r),l&&G.dispatchEvent("current-change",__assign({oldValue:n,newValue:r},t),e)},triggerRowExpandEvent:function(e,t){var n=Y.expandLazyLoadeds,r=Y.expandColumn,l=Ye.value,o=t.row;l.lazy&&-1!==lt.findRowIndexOf(n,o)||(t=!G.isExpandByRow(o),l=G.getColumnIndex(r),n=G.getVMColumnIndex(r),G.setRowExpand(o,t),G.dispatchEvent("toggle-row-expand",{expanded:t,column:r,columnIndex:l,$columnIndex:n,row:o,rowIndex:G.getRowIndex(o),$rowIndex:G.getVMRowIndex(o)},e))},triggerTreeExpandEvent:function(e,t){var n=Y.treeLazyLoadeds,r=Be.value,l=t.row,o=t.column;r.lazy&&-1!==lt.findRowIndexOf(n,l)||(t=!G.isTreeExpandByRow(l),r=G.getColumnIndex(o),n=G.getVMColumnIndex(o),G.setTreeExpand(l,t),G.dispatchEvent("toggle-tree-expand",{expanded:t,column:o,columnIndex:r,$columnIndex:n,row:l},e))},triggerSortEvent:function(e,t,n){var r=Ue.value,l=t.field;t.sortable&&(n&&t.order!==n?G.sort({field:l,order:n}):G.clearSort(r.multiple?t:null),t={column:t,field:l,property:l,order:t.order,sortList:G.getSortColumns()},G.dispatchEvent("sort-change",t,e))},triggerScrollXEvent:function(){s()},triggerScrollYEvent:function(e){var t=B.scrollYStore,n=t.adaptive,r=t.offsetSize,t=t.visibleSize;(isWebkit&&n&&2*r+t<=40?S:xt)(e)},scrollToTreeRow:function(t){var n,e=$.treeConfig,r=B.tableFullData,l=[];return e&&(e=Be.value,(e=_xeUtils.default.findTree(r,function(e){return lt.eqRow(e,t)},e))&&(n=e.nodes).forEach(function(e,t){t<n.length-1&&!G.isTreeExpandByRow(e)&&l.push(G.setTreeExpand(e,!0))})),Promise.all(l).then(function(){return(0,_util.rowToVisible)(lt,t)})},updateScrollXSpace:function(){var r=Y.scrollXLoad,l=Y.scrollbarWidth,e=B.visibleColumn,t=B.scrollXStore,o=B.elemStore,a=B.tableWidth,n=le.value,i=oe.value,u=ae.value,i=i?i.$el:null;i&&(n=n?n.$el:null,u=u?u.$el:null,n=n?n.querySelector(".vxe-table--header"):null,i=i.querySelector(".vxe-table--body"),u=u?u.querySelector(".vxe-table--footer"):null,e=e.slice(0,t.startIndex).reduce(function(e,t){return e+t.renderWidth},0),t="",r&&(t="".concat(e,"px")),n&&(n.style.marginLeft=t),i.style.marginLeft=t,u&&(u.style.marginLeft=t),["main"].forEach(function(n){["header","body","footer"].forEach(function(e){var t=o["".concat(n,"-").concat(e,"-xSpace")],t=t?t.value:null;t&&(t.style.width=r?"".concat(a+("header"===e?l:0),"px"):"")})}),(0,_vue.nextTick)(ft))},updateScrollYSpace:function(){var e=Y.scrollYLoad,t=B.scrollYStore,n=B.elemStore,r=B.afterFullData,l=t.startIndex,t=t.rowHeight,r=r.length*t,t=Math.max(0,l*t),o="",a="";e&&(o="".concat(t,"px"),a="".concat(r,"px")),["main","left","right"].forEach(function(t){var e=n["".concat(t,"-body-table")],e=e?e.value:null;e&&(e.style.marginTop=o),["header","body","footer"].forEach(function(e){e=n["".concat(t,"-").concat(e,"-ySpace")],e=e?e.value:null;e&&(e.style.height=a)})}),(0,_vue.nextTick)(ft)},updateScrollXData:function(){(0,_vue.nextTick)(function(){ht(),Z.updateScrollXSpace()})},updateScrollYData:function(){(0,_vue.nextTick)(function(){Z.handleTableData(),Z.updateScrollYSpace()})},checkScrolling:function(){var e=ve.value,t=ge.value,n=oe.value,n=n?n.$el:null;n&&(e&&(0<n.scrollLeft?(0,_dom.addClass):(0,_dom.removeClass))(e,"scrolling--middle"),t&&(n.clientWidth<n.scrollWidth-Math.ceil(n.scrollLeft)?(0,_dom.addClass):(0,_dom.removeClass))(t,"scrolling--middle"))},updateZindex:function(){$.zIndex?B.tZindex=$.zIndex:B.tZindex<(0,_utils.getLastZIndex)()&&(B.tZindex=(0,_utils.nextZIndex)())},updateCellAreas:function(){var e=$.mouseConfig,t=Me.value;e&&t.area&&lt.handleUpdateCellAreas&&lt.handleUpdateCellAreas()},triggerHoverEvent:function(e,t){t=t.row;Z.setHoverRow(t)},setHoverRow:function(e){var t=(0,_util.getRowid)(lt,e),n=J.value;Z.clearHoverRow(),n&&_xeUtils.default.arrayEach(n.querySelectorAll('[rowid="'.concat(t,'"]')),function(e){return(0,_dom.addClass)(e,"row--hover")}),B.hoverRow=e},clearHoverRow:function(){var e=J.value;e&&_xeUtils.default.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),function(e){return(0,_dom.removeClass)(e,"row--hover")}),B.hoverRow=null},getCell:function(e,t){var n,r=(0,_util.getRowid)(lt,e),l=oe.value,o=ue.value,e=se.value;return t.fixed&&("left"===t.fixed?o&&(n=o.$el):e&&(n=e.$el)),(n=n||l.$el)?n.querySelector('.vxe-body--row[rowid="'.concat(r,'"] .').concat(t.id)):null},getCellLabel:function(e,t){var n=t.formatter,r=(0,_util.getCellValue)(e,t),l=r;if(n){var o=void 0,a=B.fullAllDataRowIdData,i=(0,_util.getRowid)(lt,e),u=t.id,c=a[i];if(c&&(o=(o=c.formatData)||(a[i].formatData={}),c&&o[u]&&o[u].value===r))return o[u].label;var d,t={cellValue:r,row:e,rowIndex:G.getRowIndex(e),column:t,columnIndex:G.getColumnIndex(t)};l=_xeUtils.default.isString(n)?(d=_vXETable.VXETable.formats.get(n))?d(t):"":_xeUtils.default.isArray(n)?(d=_vXETable.VXETable.formats.get(n[0]))?d.apply(void 0,__spreadArray([t],n.slice(1),!1)):"":n(t),o&&(o[u]={value:r,label:l})}return l},findRowIndexOf:function(e,t){return t?_xeUtils.default.findIndexOf(e,function(e){return lt.eqRow(e,t)}):-1},eqRow:function(e,t){return!(!e||!t)&&(e===t||(0,_util.getRowid)(lt,e)===(0,_util.getRowid)(lt,t))}};"development"===process.env.NODE_ENV&&("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach(function(e){lt[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Export"])}}),"clearValidate,fullValidate,validate".split(",").forEach(function(e){lt[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Validator"])}})),Object.assign(lt,G,Z);function mt(e){var t=$.showHeader,n=$.showFooter,r=Y.tableData,l=Y.tableColumn,o=Y.tableGroupColumn,a=Y.columnStore,i=Y.footerTableData,u="left"===e,a=u?a.leftList:a.rightList;return(0,_vue.h)("div",{ref:u?ve:ge,class:"vxe-table--fixed-".concat(e,"-wrapper")},[t?(0,_vue.h)(_header.default,{ref:u?ie:de,fixedType:e,tableData:r,tableColumn:l,tableGroupColumn:o,fixedColumn:a}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:u?ue:se,fixedType:e,tableData:r,tableColumn:l,fixedColumn:a}),n?(0,_vue.h)(_footer.default,{ref:u?ce:fe,footerTableData:i,tableColumn:l,fixedColumn:a,fixedType:e}):(0,_vue.createCommentVNode)()])}var pt;function _t(){var e=J.value;e&&e.clientWidth&&e.clientHeight&&G.recalculate()}(0,_vue.watch)(function(){return $.data},function(e){var r=B.inited,l=B.initStatus;p(e||[]).then(function(){var e=Y.scrollXLoad,t=Y.scrollYLoad,n=Y.expandColumn;B.inited=!0,B.initStatus=!0,l||w(),r||T(),"development"===process.env.NODE_ENV&&(e||t)&&n&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),G.recalculate()})}),(0,_vue.watch)(function(){return Y.staticColumns},function(e){l(e)}),(0,_vue.watch)(function(){return Y.tableColumn},function(){Z.analyColumnWidth()}),(0,_vue.watch)(function(){return $.showHeader},function(){(0,_vue.nextTick)(function(){G.recalculate(!0).then(function(){return G.refreshScroll()})})}),(0,_vue.watch)(function(){return $.showFooter},function(){(0,_vue.nextTick)(function(){G.recalculate(!0).then(function(){return G.refreshScroll()})})}),(0,_vue.watch)(function(){return $.height},function(){(0,_vue.nextTick)(function(){return G.recalculate(!0)})}),(0,_vue.watch)(function(){return $.maxHeight},function(){(0,_vue.nextTick)(function(){return G.recalculate(!0)})}),(0,_vue.watch)(function(){return $.syncResize},function(e){e&&(_t(),(0,_vue.nextTick)(function(){_t(),setTimeout(_t)}))}),(0,_vue.watch)(function(){return $.mergeCells},function(e){G.clearMergeCells(),(0,_vue.nextTick)(function(){e&&G.setMergeCells(e)})}),(0,_vue.watch)(function(){return $.mergeFooterItems},function(e){G.clearMergeFooterItems(),(0,_vue.nextTick)(function(){e&&G.setMergeFooterItems(e)})}),_vXETable.VXETable.hooks.forEach(function(e){e=e.setupTable;!e||(e=e(lt))&&_xeUtils.default.isObject(e)&&Object.assign(lt,e)}),Z.preventEvent(null,"created",{$table:lt}),(0,_vue.onActivated)(function(){G.recalculate().then(function(){return G.refreshScroll()}),Z.preventEvent(null,"activated",{$table:lt})}),(0,_vue.onDeactivated)(function(){B.isActivated=!1,Z.preventEvent(null,"deactivated",{$table:lt})}),(0,_vue.onMounted)(function(){(0,_vue.nextTick)(function(){var e=$.data,t=$.treeConfig,n=$.showOverflow,r=B.scrollXStore,l=B.scrollYStore,o=we.value,a=Le.value,i=Be.value,u=ye.value,c=Se.value,d=Ye.value,s=Ee.value;if("development"===process.env.NODE_ENV&&($.rowId||s.keyField||!(c.reserve||c.checkRowKeys||u.reserve||u.checkRowKey||d.expandRowKeys||i.expandRowKeys)||(0,_log.warnLog)("vxe.error.reqProp",["row-config.keyField"]),$.editConfig&&(a.showStatus||a.showUpdateStatus||a.showInsertStatus)&&!$.keepSource&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),!t||!i.line||($.rowKey||s.useKey)&&n||(0,_log.warnLog)("vxe.error.reqProp",["row-config.useKey | show-overflow"]),t&&$.stripe&&(0,_log.warnLog)("vxe.error.noTree",["stripe"]),$.showFooter&&!$.footerMethod&&(0,_log.warnLog)("vxe.error.reqProp",["footer-method"]),v=$.exportConfig,t=$.importConfig,g=je.value,f=We.value,t&&f.types&&!f.importMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.config.importTypes,f.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types=".concat(f.types.join(",")),f.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.config.importTypes,e)}).join(",")||_vXETable.VXETable.config.importTypes.join(",")]),v&&g.types&&!g.exportMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.config.exportTypes,g.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types=".concat(g.types.join(",")),g.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.config.exportTypes,e)}).join(",")||_vXETable.VXETable.config.exportTypes.join(",")])),"development"===process.env.NODE_ENV){var f=Qe.value,v=Me.value,g=Ee.value;if(!$.id&&$.customConfig&&(!0===f.storage||f.storage&&f.storage.resizable||f.storage&&f.storage.visible)&&(0,_log.errLog)("vxe.error.reqProp",["id"]),$.treeConfig&&c.range&&(0,_log.errLog)("vxe.error.noTree",["checkbox-config.range"]),g.height&&!$.showOverflow&&(0,_log.warnLog)("vxe.error.notProp",["table.show-overflow"]),!lt.handleUpdateCellAreas&&($.clipConfig&&(0,_log.warnLog)("vxe.error.notProp",["clip-config"]),$.fnrConfig&&(0,_log.warnLog)("vxe.error.notProp",["fnr-config"]),v.area))return void(0,_log.errLog)("vxe.error.notProp",["mouse-config.area"]);v.area&&v.selected&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),v.area&&c.range&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","checkbox-config.range"]),$.treeConfig&&v.area&&(0,_log.errLog)("vxe.error.noTree",["mouse-config.area"])}"development"===process.env.NODE_ENV&&($.editConfig&&!lt.insert&&(0,_log.errLog)("vxe.error.reqModule",["Edit"]),$.editRules&&!lt.validate&&(0,_log.errLog)("vxe.error.reqModule",["Validator"]),(c.range||$.keyboardConfig||$.mouseConfig)&&!lt.triggerCellMousedownEvent&&(0,_log.errLog)("vxe.error.reqModule",["Keyboard"]),($.printConfig||$.importConfig||$.exportConfig)&&!lt.exportData&&(0,_log.errLog)("vxe.error.reqModule",["Export"])),Object.assign(l,{startIndex:0,endIndex:0,visibleSize:0,adaptive:!1!==o.adaptive}),Object.assign(r,{startIndex:0,endIndex:0,visibleSize:0}),p(e||[]).then(function(){e&&e.length&&(B.inited=!0,B.initStatus=!0,w(),T()),ft()}),$.autoResize&&(o=J.value,r=Z.getParentElem(),pt=(0,_resize.createResizeEvent)(function(){$.autoResize&&G.recalculate(!0)}),o&&pt.observe(o),r&&pt.observe(r))}),_event.GlobalEvent.on(lt,"paste",U),_event.GlobalEvent.on(lt,"copy",O),_event.GlobalEvent.on(lt,"cut",M),_event.GlobalEvent.on(lt,"mousedown",I),_event.GlobalEvent.on(lt,"blur",D),_event.GlobalEvent.on(lt,"mousewheel",k),_event.GlobalEvent.on(lt,"keydown",L),_event.GlobalEvent.on(lt,"resize",F),lt.handleGlobalContextmenuEvent&&_event.GlobalEvent.on(lt,"contextmenu",lt.handleGlobalContextmenuEvent),Z.preventEvent(null,"mounted",{$table:lt})}),(0,_vue.onBeforeUnmount)(function(){pt&&pt.disconnect(),G.closeFilter(),lt.closeMenu&&lt.closeMenu(),Z.preventEvent(null,"beforeUnmount",{$table:lt})}),(0,_vue.onUnmounted)(function(){_event.GlobalEvent.off(lt,"paste"),_event.GlobalEvent.off(lt,"copy"),_event.GlobalEvent.off(lt,"cut"),_event.GlobalEvent.off(lt,"mousedown"),_event.GlobalEvent.off(lt,"blur"),_event.GlobalEvent.off(lt,"mousewheel"),_event.GlobalEvent.off(lt,"keydown"),_event.GlobalEvent.off(lt,"resize"),_event.GlobalEvent.off(lt,"contextmenu"),Z.preventEvent(null,"unmounted",{$table:lt})});return lt.renderVN=function(){var e=$.loading,t=$.stripe,n=$.showHeader,r=$.height,l=$.treeConfig,o=$.mouseConfig,a=$.showFooter,i=$.highlightCell,u=$.highlightHoverRow,c=$.highlightHoverColumn,d=$.editConfig,s=Y.isGroup,f=Y.overflowX,v=Y.overflowY,g=Y.scrollXLoad,h=Y.scrollYLoad,x=Y.scrollbarHeight,m=Y.tableData,p=Y.tableColumn,_=Y.tableGroupColumn,w=Y.footerTableData,b=Y.initStore,C=Y.columnStore,E=Y.filterStore,R=C.leftList,T=C.rightList,y=De.value,S=Be.value,I=Ee.value,D=Ce.value,k=W.value,L=et.value,U=Me.value,O=pe.value,M=ke.value,F=Ze.value,C=Xe.value;return(0,_vue.h)("div",{ref:J,class:["vxe-table","vxe-table--render-default","tid_".concat(j),"border--".concat(L),((L={})["size--".concat(k)]=k,L["vxe-editable"]=!!d,L["cell--highlight"]=i,L["cell--selected"]=o&&U.selected,L["cell--area"]=o&&U.area,L["row--highlight"]=I.isHover||u,L["column--highlight"]=D.isHover||c,L["is--header"]=n,L["is--footer"]=a,L["is--group"]=s,L["is--tree-line"]=l&&S.line,L["is--fixed-left"]=R.length,L["is--fixed-right"]=T.length,L["is--animat"]=!!$.animat,L["is--round"]=$.round,L["is--stripe"]=!l&&t,L["is--loading"]=e,L["is--empty"]=!e&&!m.length,L["is--scroll-y"]=v,L["is--scroll-x"]=f,L["is--virtual-x"]=g,L["is--virtual-y"]=h,L)],onKeydown:A},[(0,_vue.h)("div",{class:"vxe-table-slots"},z.default?z.default({}):[]),(0,_vue.h)("div",{class:"vxe-table--render-wrapper"},[(0,_vue.h)("div",{class:"vxe-table--main-wrapper"},[n?(0,_vue.h)(_header.default,{ref:le,tableData:m,tableColumn:p,tableGroupColumn:_}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:oe,tableData:m,tableColumn:p}),a?(0,_vue.h)(_footer.default,{ref:ae,footerTableData:w,tableColumn:p}):(0,_vue.createCommentVNode)()]),(0,_vue.h)("div",{class:"vxe-table--fixed-wrapper"},[R&&R.length&&f?mt("left"):(0,_vue.createCommentVNode)(),T&&T.length&&f?mt("right"):(0,_vue.createCommentVNode)()])]),(0,_vue.h)("div",{ref:xe,class:"vxe-table--empty-placeholder"},[(0,_vue.h)("div",{class:"vxe-table--empty-content"},function(){var e=Ge.value,t={$table:lt};if(z.empty)return z.empty(t);var n=e.name?_vXETable.VXETable.renderer.get(e.name):null,n=n?n.renderEmpty:null;return n?n(e,t):(0,_utils.getFuncText)($.emptyText)||_conf.default.i18n("vxe.table.emptyText")}())]),(0,_vue.h)("div",{class:"vxe-table--border-line"}),(0,_vue.h)("div",{ref:he,class:"vxe-table--resizable-bar",style:f?{"padding-bottom":"".concat(x,"px")}:null}),(0,_vue.h)(_index.default,{class:"vxe-table--loading",modelValue:e,icon:F.icon,text:F.text}),b.filter?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-filter"),{ref:ne,filterStore:E}):(0,_vue.createCommentVNode)(),b.import&&$.importConfig?(0,_vue.h)((0,_vue.resolveComponent)("vxe-import-panel"),{defaultOptions:Y.importParams,storeData:Y.importStore}):(0,_vue.createCommentVNode)(),b.export&&($.exportConfig||$.printConfig)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-export-panel"),{defaultOptions:Y.exportParams,storeData:Y.exportStore}):(0,_vue.createCommentVNode)(),C?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-context-menu"),{ref:re}):(0,_vue.createCommentVNode)(),P?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),{ref:ee,isArrow:!1,enterable:!1}):(0,_vue.createCommentVNode)(),P&&$.editRules&&O.showMessage&&("default"===O.message?!r:"tooltip"===O.message)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:te,class:"vxe-table--valid-error"},"tooltip"===O.message||1===m.length?M:{})):(0,_vue.createCommentVNode)(),P?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:Q},y)):(0,_vue.createCommentVNode)()])},(0,_vue.provide)("xecolgroup",null),(0,_vue.provide)("$xetable",lt),lt},render:function(){return this.renderVN()}});exports.default=_default;